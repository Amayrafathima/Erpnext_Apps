{
  "version": 3,
  "sources": ["../../../../../apps/frappe/frappe/public/js/onboarding_tours/onboarding_tours.js"],
  "sourcesContent": ["frappe.ui.OnboardingTour = class OnboardingTour {\n\tconstructor() {\n\t\tthis.driver_steps = [];\n\t\tthis.last_step_saved = null;\n\t\tthis.last_element_clicked = null;\n\t}\n\n\tinit_driver() {\n\t\tthis.driver = new frappe.Driver({\n\t\t\tclassName: \"frappe-driver\",\n\t\t\tallowClose: false,\n\t\t\tpadding: 10,\n\t\t\toverlayClickNext: false,\n\t\t\tkeyboardControl: false,\n\t\t\tnextBtnText: __(\"Next\"),\n\t\t\tprevBtnText: __(\"Previous\"),\n\t\t\tdoneBtnText: __(\"Done\"),\n\t\t\tcloseBtnText: __(\"Skip\"),\n\t\t\topacity: 0.5,\n\t\t\tonHighlighted: (step) => {\n\t\t\t\tfrappe.ui.next_form_tour = step.options.step_info?.next_form_tour;\n\t\t\t\tconst wait_for_node = setInterval(() => {\n\t\t\t\t\tif (!step.popover.node) return;\n\t\t\t\t\tif (step.options.step_info?.offset_x) {\n\t\t\t\t\t\tstep.popover.node.style.left = `${\n\t\t\t\t\t\t\tstep.popover.node.offsetLeft + step.options.step_info.offset_x\n\t\t\t\t\t\t}px`;\n\t\t\t\t\t}\n\t\t\t\t\tif (step.options.step_info?.offset_y) {\n\t\t\t\t\t\tstep.popover.node.style.top = `${\n\t\t\t\t\t\t\tstep.popover.node.offsetTop + step.options.step_info.offset_y\n\t\t\t\t\t\t}px`;\n\t\t\t\t\t}\n\t\t\t\t\tif (step.popover.node.offsetLeft < 0) {\n\t\t\t\t\t\tstep.popover.node.style.minWidth = \"200px\";\n\t\t\t\t\t\tstep.popover.node.style.maxWidth = `${\n\t\t\t\t\t\t\t350 + step.popover.node.offsetLeft\n\t\t\t\t\t\t}px`;\n\t\t\t\t\t\tstep.popover.node.style.left = \"0px\";\n\t\t\t\t\t}\n\t\t\t\t\tif (step.popover.closeBtnNode) {\n\t\t\t\t\t\tstep.popover.closeBtnNode.onclick = () => {\n\t\t\t\t\t\t\tthis.on_finish && this.on_finish();\n\t\t\t\t\t\t\t!frappe.boot.user.onboarding_status[this.tour.name] &&\n\t\t\t\t\t\t\t\t(frappe.boot.user.onboarding_status[this.tour.name] = {});\n\t\t\t\t\t\t\tfrappe.boot.user.onboarding_status[this.tour.name].is_complete = true;\n\t\t\t\t\t\t\tif (!this.driver.hasNextStep()) {\n\t\t\t\t\t\t\t\tfrappe.boot.user.onboarding_status[\n\t\t\t\t\t\t\t\t\tthis.tour.name\n\t\t\t\t\t\t\t\t].all_steps_completed = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\t\tmethod: \"frappe.desk.doctype.form_tour.form_tour.update_user_status\",\n\t\t\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t\t\tvalue: JSON.stringify(frappe.boot.user.onboarding_status),\n\t\t\t\t\t\t\t\t\tstep: JSON.stringify(step.options.step_info),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tclearInterval(wait_for_node);\n\t\t\t\t}, 300);\n\n\t\t\t\t// focus on first input.\n\t\t\t\t// TODO : later add option to select which input to focus as well.\n\t\t\t\tconst $input = $(step.node).find(\"input\").get(0);\n\t\t\t\tif ($input) frappe.utils.sleep(200).then(() => $input.focus());\n\t\t\t},\n\t\t});\n\t}\n\n\tasync init({ tour_name, start_step }) {\n\t\tthis.tour = await frappe.db.get_doc(\"Form Tour\", tour_name);\n\t\tthis.init_driver();\n\t\tthis.build_steps();\n\t\tthis.update_driver_steps();\n\t\tif (!this.tour.track_steps) {\n\t\t\tstart_step = 0;\n\t\t}\n\t\tthis.start(start_step);\n\t}\n\n\tbuild_steps() {\n\t\tthis.driver_steps = [];\n\t\tthis.tour.steps.forEach((step) => {\n\t\t\tconst on_next = async (el) => {\n\t\t\t\tconst step_index = this.driver.steps.indexOf(el);\n\t\t\t\tif (step_index == -1 || this.last_step_saved?.name == step.name) return;\n\t\t\t\tfrappe.boot.user.onboarding_status[this.tour.name] = {\n\t\t\t\t\tsteps_complete: step_index,\n\t\t\t\t};\n\t\t\t\tif (!this.driver.hasNextStep()) {\n\t\t\t\t\tthis.on_finish && this.on_finish();\n\t\t\t\t\tfrappe.boot.user.onboarding_status[this.tour.name].is_complete = true;\n\t\t\t\t}\n\t\t\t\tthis.last_step_saved = step;\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"frappe.desk.doctype.form_tour.form_tour.update_user_status\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tvalue: JSON.stringify(frappe.boot.user.onboarding_status),\n\t\t\t\t\t\tstep: JSON.stringify(step),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t};\n\t\t\tconst driver_step = this.get_step(step, on_next);\n\t\t\tdriver_step.element && this.driver_steps.push(driver_step);\n\t\t});\n\t}\n\n\tget_step(step_info, on_next) {\n\t\tconst {\n\t\t\tname,\n\t\t\telement_selector,\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\tondemand_description,\n\t\t\tposition,\n\t\t\tparent_element_selector,\n\t\t\thide_buttons,\n\t\t\tnext_on_click,\n\t\t\tpopover_element,\n\t\t\tmodal_trigger,\n\t\t} = step_info;\n\t\tlet element = cur_page?.page.querySelector(element_selector);\n\t\t!element && (element = document.querySelector(element_selector));\n\t\tif (element && parent_element_selector) {\n\t\t\telement = element.closest(parent_element_selector);\n\t\t}\n\t\tif (element && (next_on_click || hide_buttons || modal_trigger)) {\n\t\t\t$(element).on(\"click\", () => {\n\t\t\t\tif (\n\t\t\t\t\t!this.driver.getHighlightedElement() ||\n\t\t\t\t\tthis.driver.getHighlightedElement().node.id?.startsWith(\"popover\")\n\t\t\t\t)\n\t\t\t\t\treturn;\n\n\t\t\t\tif (\n\t\t\t\t\tmodal_trigger &&\n\t\t\t\t\t(!this.last_element_clicked ||\n\t\t\t\t\t\tnew Date().getTime() - new Date(this.last_element_clicked).getTime() >\n\t\t\t\t\t\t\t1000)\n\t\t\t\t) {\n\t\t\t\t\tthis.last_element_clicked = new Date().getTime();\n\t\t\t\t\tthis.handle_modal_steps(this.driver.currentStep, title, ondemand_description);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!popover_element) {\n\t\t\t\t\ton_next(this.driver.getHighlightedElement());\n\t\t\t\t\tthis.driver.moveNext();\n\t\t\t\t\tthis.driver.overlay.refresh();\n\t\t\t\t}\n\n\t\t\t\tif (!this.driver.getHighlightedElement()) return;\n\t\t\t\ton_next(this.driver.getHighlightedElement());\n\t\t\t\tlet popover = this.driver\n\t\t\t\t\t.getHighlightedElement()\n\t\t\t\t\t.node.getAttribute(\"aria-describedby\")\n\t\t\t\t\t? this.driver.getHighlightedElement().node\n\t\t\t\t\t: this.driver\n\t\t\t\t\t\t\t.getHighlightedElement()\n\t\t\t\t\t\t\t.node.querySelector('[aria-describedby^=\"popover\"]');\n\n\t\t\t\tif (!popover) return;\n\n\t\t\t\tlet popover_id = popover.getAttribute(\"aria-describedby\");\n\t\t\t\tlet step_index = this.driver.steps.indexOf(this.driver.getHighlightedElement());\n\n\t\t\t\tif (this.driver_steps[step_index + 1]?.element.id == popover_id) return;\n\n\t\t\t\tthis.driver_steps = this.driver_steps.filter(\n\t\t\t\t\t(step) => !step.element.id?.startsWith(\"popover\")\n\t\t\t\t);\n\n\t\t\t\tlet new_step = { ...this.driver_steps[step_index] };\n\t\t\t\tnew_step.element = document.getElementById(popover_id);\n\t\t\t\tnew_step.showButtons = false;\n\t\t\t\tondemand_description && (new_step.popover.description = ondemand_description);\n\n\t\t\t\tthis.driver_steps.splice(this.driver.currentStep + 1, 0, new_step);\n\t\t\t\tthis.update_driver_steps();\n\t\t\t\tthis.driver.moveNext();\n\t\t\t\tthis.driver.overlay.refresh();\n\n\t\t\t\t$(popover).one(\"hide.bs.popover\", (e) => {\n\t\t\t\t\tthis.driver_steps.splice(this.driver.currentStep, 1);\n\t\t\t\t\tthis.driver_steps[this.driver.currentStep - 1].showButtons = true;\n\t\t\t\t\tnew_step.popover.description = description;\n\t\t\t\t\tthis.update_driver_steps();\n\t\t\t\t\tthis.driver.movePrevious();\n\t\t\t\t\tthis.driver.overlay.refresh();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tlet showButtons = true;\n\t\tif (popover_element || hide_buttons) {\n\t\t\tshowButtons = false;\n\t\t}\n\t\treturn {\n\t\t\telement,\n\t\t\tname,\n\t\t\tpopover: {\n\t\t\t\ttitle,\n\t\t\t\tdescription,\n\t\t\t\tposition: frappe.router.slug(position || \"Bottom\"),\n\t\t\t},\n\t\t\tonNext: on_next,\n\t\t\tstep_info: step_info,\n\t\t\tshowButtons,\n\t\t};\n\t}\n\n\tupdate_driver_steps(steps = []) {\n\t\tif (steps.length == 0) {\n\t\t\tsteps = this.driver_steps;\n\t\t}\n\t\tthis.driver.defineSteps(steps);\n\t}\n\n\tstart(idx = 0) {\n\t\tif (this.driver_steps.length == 0) {\n\t\t\treturn;\n\t\t}\n\t\tthis.driver.start(idx);\n\t}\n\n\thandle_modal_steps(step, title, description) {\n\t\tsetTimeout(() => {\n\t\t\tconst modal_element = $(\".modal-content\");\n\t\t\tconst attach_dialog_step = {\n\t\t\t\telement: modal_element[0],\n\t\t\t\tallowClose: false,\n\t\t\t\toverlayClickNext: false,\n\t\t\t\tpopover: {\n\t\t\t\t\ttitle,\n\t\t\t\t\tdescription,\n\t\t\t\t\tposition: \"left-center\",\n\t\t\t\t\tdoneBtnText: __(\"Next\"),\n\t\t\t\t},\n\t\t\t};\n\t\t\tthis.driver_steps.splice(step + 1, 0, attach_dialog_step);\n\t\t\tthis.update_driver_steps(); // need to define again, since driver.js only considers steps which are inside DOM\n\t\t\tthis.driver.reset();\n\t\t\tthis.driver.start(step + 1);\n\t\t\tthis.driver.overlay.refresh();\n\t\t\tmodal_element.closest(\".modal\").one(\"hide.bs.modal\", () => {\n\t\t\t\tthis.driver_steps.splice(this.driver.currentStep, 1);\n\t\t\t\tthis.update_driver_steps();\n\t\t\t\tthis.driver.movePrevious();\n\t\t\t\tthis.driver.moveNext();\n\t\t\t\tthis.driver.overlay.refresh();\n\t\t\t});\n\t\t}, 500);\n\t}\n};\n\nfrappe.ui.init_onboarding_tour = () => {\n\t// As of now Tours are only for desktop as it is annoying on mobile.\n\t// Also lot of elements are hidden on mobile so until we find a better way to do it.\n\tif (!window.matchMedia(\"(min-device-width: 992px)\").matches) return;\n\n\ttypeof frappe.boot.onboarding_tours == \"undefined\" && frappe.boot.onboarding_tours == [];\n\ttypeof frappe.boot.user.onboarding_status == \"undefined\" &&\n\t\tfrappe.boot.user.onboarding_status == {};\n\tlet route = frappe.router.current_route;\n\tif (route[0] === \"\") return;\n\n\tlet tour_name;\n\tlet matching_tours = [];\n\tlet start_step;\n\tif (route[0] == \"query-report\") {\n\t\troute = [\"List\", route[1], \"Report\"];\n\t}\n\tif (route[0] != \"dashboard-view\") {\n\t\tfrappe.boot.onboarding_tours &&\n\t\t\tfrappe.boot.onboarding_tours.forEach((tour) => {\n\t\t\t\tlet tour_route = tour[1];\n\t\t\t\tlet length = Math.min(route.length, tour_route.length);\n\t\t\t\tif (length >= 1 && route[0] != tour_route[0]) return;\n\t\t\t\tif (length >= 2 && tour_route[1] != \"*\" && route[1] != tour_route[1]) return;\n\t\t\t\tif (\n\t\t\t\t\tlength >= 3 &&\n\t\t\t\t\t[\"*\", \"new-*\"].indexOf(tour_route[2]) == -1 &&\n\t\t\t\t\troute[2] != tour_route[2]\n\t\t\t\t)\n\t\t\t\t\treturn;\n\t\t\t\tmatching_tours.push(tour);\n\t\t\t});\n\t}\n\tmatching_tours = matching_tours.filter((tour) => {\n\t\tif (frappe.boot.user.onboarding_status[tour[0]]?.is_complete == true) return false;\n\t\treturn true;\n\t});\n\tmatching_tours = matching_tours.map((tour) => {\n\t\tif (frappe.boot.user.onboarding_status[tour[0]]?.steps_complete != undefined) {\n\t\t\ttour.push(frappe.boot.user.onboarding_status[tour[0]].steps_complete);\n\t\t}\n\t\treturn tour;\n\t});\n\tif (matching_tours.length == 0) return;\n\tlet current_tour = matching_tours.find(\n\t\t(tour) => tour[0] == frappe.ui.currentTourInstance?.tour?.name\n\t);\n\tlet next_tour = matching_tours.find((tour) => tour[0] == frappe.ui.next_form_tour);\n\tif (current_tour) {\n\t\ttour_name = current_tour[0];\n\t\tstart_step = current_tour.at(-1);\n\t\tif (typeof start_step != \"number\") {\n\t\t\tstart_step = 0;\n\t\t}\n\t} else if (next_tour) {\n\t\ttour_name = next_tour[0];\n\t\tstart_step = next_tour.at(-1);\n\t\tif (typeof start_step != \"number\") {\n\t\t\tstart_step = 0;\n\t\t} else {\n\t\t\tstart_step += 1;\n\t\t}\n\t\tfrappe.ui.next_form_tour = undefined;\n\t} else {\n\t\ttour_name = matching_tours[0][0];\n\t\tstart_step = matching_tours[0].at(-1);\n\t\tif (typeof start_step != \"number\") {\n\t\t\tstart_step = 0;\n\t\t} else {\n\t\t\tstart_step += 1;\n\t\t}\n\t}\n\tif (!tour_name) return;\n\tif (frappe.ui.currentTourInstance?.driver) {\n\t\tfrappe.ui.currentTourInstance.driver_steps = [];\n\t\tfrappe.ui.currentTourInstance.driver.reset(true);\n\t\tfrappe.ui.currentTourInstance.update_driver_steps();\n\t}\n\tconst tour = (frappe.ui.currentTourInstance = new frappe.ui.OnboardingTour());\n\t// wait for workspace and/or data to load.\n\tconst wait_for_data = setInterval(() => {\n\t\tif (cur_page?.page.querySelector(\".workspace-sidebar-skeleton\")) return;\n\t\tif (cur_page?.page.querySelector(\".workspace-skeleton\")) return;\n\t\tif (document.body.getAttribute(\"data-ajax-state\") === \"complete\") {\n\t\t\tfrappe.utils.sleep(500).then(() => {\n\t\t\t\ttour.init({\n\t\t\t\t\ttour_name,\n\t\t\t\t\tstart_step,\n\t\t\t\t});\n\t\t\t\tclearInterval(wait_for_data);\n\t\t\t});\n\t\t}\n\t}, 100);\n};\n\nfrappe.router.on(\"change\", () => {\n\tfrappe.ui.init_onboarding_tour();\n});\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA,SAAO,GAAG,iBAAiB,MAAM,eAAe;AAAA,IAC/C,cAAc;AACb,WAAK,eAAe,CAAC;AACrB,WAAK,kBAAkB;AACvB,WAAK,uBAAuB;AAAA,IAC7B;AAAA,IAEA,cAAc;AACb,WAAK,SAAS,IAAI,OAAO,OAAO;AAAA,QAC/B,WAAW;AAAA,QACX,YAAY;AAAA,QACZ,SAAS;AAAA,QACT,kBAAkB;AAAA,QAClB,iBAAiB;AAAA,QACjB,aAAa,GAAG,MAAM;AAAA,QACtB,aAAa,GAAG,UAAU;AAAA,QAC1B,aAAa,GAAG,MAAM;AAAA,QACtB,cAAc,GAAG,MAAM;AAAA,QACvB,SAAS;AAAA,QACT,eAAe,CAAC,SAAS;AAnB5B;AAoBI,iBAAO,GAAG,kBAAiB,UAAK,QAAQ,cAAb,mBAAwB;AACnD,gBAAM,gBAAgB,YAAY,MAAM;AArB5C,gBAAAA,KAAA;AAsBK,gBAAI,CAAC,KAAK,QAAQ;AAAM;AACxB,iBAAIA,MAAA,KAAK,QAAQ,cAAb,gBAAAA,IAAwB,UAAU;AACrC,mBAAK,QAAQ,KAAK,MAAM,OAAO,GAC9B,KAAK,QAAQ,KAAK,aAAa,KAAK,QAAQ,UAAU;AAAA,YAExD;AACA,iBAAI,UAAK,QAAQ,cAAb,mBAAwB,UAAU;AACrC,mBAAK,QAAQ,KAAK,MAAM,MAAM,GAC7B,KAAK,QAAQ,KAAK,YAAY,KAAK,QAAQ,UAAU;AAAA,YAEvD;AACA,gBAAI,KAAK,QAAQ,KAAK,aAAa,GAAG;AACrC,mBAAK,QAAQ,KAAK,MAAM,WAAW;AACnC,mBAAK,QAAQ,KAAK,MAAM,WAAW,GAClC,MAAM,KAAK,QAAQ,KAAK;AAEzB,mBAAK,QAAQ,KAAK,MAAM,OAAO;AAAA,YAChC;AACA,gBAAI,KAAK,QAAQ,cAAc;AAC9B,mBAAK,QAAQ,aAAa,UAAU,MAAM;AACzC,qBAAK,aAAa,KAAK,UAAU;AACjC,iBAAC,OAAO,KAAK,KAAK,kBAAkB,KAAK,KAAK,UAC5C,OAAO,KAAK,KAAK,kBAAkB,KAAK,KAAK,QAAQ,CAAC;AACxD,uBAAO,KAAK,KAAK,kBAAkB,KAAK,KAAK,MAAM,cAAc;AACjE,oBAAI,CAAC,KAAK,OAAO,YAAY,GAAG;AAC/B,yBAAO,KAAK,KAAK,kBAChB,KAAK,KAAK,MACT,sBAAsB;AAAA,gBACzB;AAEA,uBAAO,KAAK;AAAA,kBACX,QAAQ;AAAA,kBACR,MAAM;AAAA,oBACL,OAAO,KAAK,UAAU,OAAO,KAAK,KAAK,iBAAiB;AAAA,oBACxD,MAAM,KAAK,UAAU,KAAK,QAAQ,SAAS;AAAA,kBAC5C;AAAA,gBACD,CAAC;AAAA,cACF;AAAA,YACD;AACA,0BAAc,aAAa;AAAA,UAC5B,GAAG,GAAG;AAIN,gBAAM,SAAS,EAAE,KAAK,IAAI,EAAE,KAAK,OAAO,EAAE,IAAI,CAAC;AAC/C,cAAI;AAAQ,mBAAO,MAAM,MAAM,GAAG,EAAE,KAAK,MAAM,OAAO,MAAM,CAAC;AAAA,QAC9D;AAAA,MACD,CAAC;AAAA,IACF;AAAA,IAEA,MAAM,KAAK,EAAE,WAAW,WAAW,GAAG;AACrC,WAAK,OAAO,MAAM,OAAO,GAAG,QAAQ,aAAa,SAAS;AAC1D,WAAK,YAAY;AACjB,WAAK,YAAY;AACjB,WAAK,oBAAoB;AACzB,UAAI,CAAC,KAAK,KAAK,aAAa;AAC3B,qBAAa;AAAA,MACd;AACA,WAAK,MAAM,UAAU;AAAA,IACtB;AAAA,IAEA,cAAc;AACb,WAAK,eAAe,CAAC;AACrB,WAAK,KAAK,MAAM,QAAQ,CAAC,SAAS;AACjC,cAAM,UAAU,OAAO,OAAO;AAtFjC;AAuFI,gBAAM,aAAa,KAAK,OAAO,MAAM,QAAQ,EAAE;AAC/C,cAAI,cAAc,QAAM,UAAK,oBAAL,mBAAsB,SAAQ,KAAK;AAAM;AACjE,iBAAO,KAAK,KAAK,kBAAkB,KAAK,KAAK,QAAQ;AAAA,YACpD,gBAAgB;AAAA,UACjB;AACA,cAAI,CAAC,KAAK,OAAO,YAAY,GAAG;AAC/B,iBAAK,aAAa,KAAK,UAAU;AACjC,mBAAO,KAAK,KAAK,kBAAkB,KAAK,KAAK,MAAM,cAAc;AAAA,UAClE;AACA,eAAK,kBAAkB;AACvB,iBAAO,KAAK;AAAA,YACX,QAAQ;AAAA,YACR,MAAM;AAAA,cACL,OAAO,KAAK,UAAU,OAAO,KAAK,KAAK,iBAAiB;AAAA,cACxD,MAAM,KAAK,UAAU,IAAI;AAAA,YAC1B;AAAA,UACD,CAAC;AAAA,QACF;AACA,cAAM,cAAc,KAAK,SAAS,MAAM,OAAO;AAC/C,oBAAY,WAAW,KAAK,aAAa,KAAK,WAAW;AAAA,MAC1D,CAAC;AAAA,IACF;AAAA,IAEA,SAAS,WAAW,SAAS;AAC5B,YAAM;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACD,IAAI;AACJ,UAAI,UAAU,qCAAU,KAAK,cAAc;AAC3C,OAAC,YAAY,UAAU,SAAS,cAAc,gBAAgB;AAC9D,UAAI,WAAW,yBAAyB;AACvC,kBAAU,QAAQ,QAAQ,uBAAuB;AAAA,MAClD;AACA,UAAI,YAAY,iBAAiB,gBAAgB,gBAAgB;AAChE,UAAE,OAAO,EAAE,GAAG,SAAS,MAAM;AAlIhC;AAmII,cACC,CAAC,KAAK,OAAO,sBAAsB,OACnC,UAAK,OAAO,sBAAsB,EAAE,KAAK,OAAzC,mBAA6C,WAAW;AAExD;AAED,cACC,kBACC,CAAC,KAAK,wBACN,IAAI,KAAK,EAAE,QAAQ,IAAI,IAAI,KAAK,KAAK,oBAAoB,EAAE,QAAQ,IAClE,MACD;AACD,iBAAK,uBAAuB,IAAI,KAAK,EAAE,QAAQ;AAC/C,iBAAK,mBAAmB,KAAK,OAAO,aAAa,OAAO,oBAAoB;AAC5E;AAAA,UACD;AAEA,cAAI,CAAC,iBAAiB;AACrB,oBAAQ,KAAK,OAAO,sBAAsB,CAAC;AAC3C,iBAAK,OAAO,SAAS;AACrB,iBAAK,OAAO,QAAQ,QAAQ;AAAA,UAC7B;AAEA,cAAI,CAAC,KAAK,OAAO,sBAAsB;AAAG;AAC1C,kBAAQ,KAAK,OAAO,sBAAsB,CAAC;AAC3C,cAAI,UAAU,KAAK,OACjB,sBAAsB,EACtB,KAAK,aAAa,kBAAkB,IACnC,KAAK,OAAO,sBAAsB,EAAE,OACpC,KAAK,OACJ,sBAAsB,EACtB,KAAK,cAAc,+BAA+B;AAEtD,cAAI,CAAC;AAAS;AAEd,cAAI,aAAa,QAAQ,aAAa,kBAAkB;AACxD,cAAI,aAAa,KAAK,OAAO,MAAM,QAAQ,KAAK,OAAO,sBAAsB,CAAC;AAE9E,gBAAI,UAAK,aAAa,aAAa,OAA/B,mBAAmC,QAAQ,OAAM;AAAY;AAEjE,eAAK,eAAe,KAAK,aAAa;AAAA,YACrC,CAAC,SAAM;AA5KZ,kBAAAA;AA4Ke,wBAACA,MAAA,KAAK,QAAQ,OAAb,gBAAAA,IAAiB,WAAW;AAAA;AAAA,UACxC;AAEA,cAAI,WAAW,mBAAK,KAAK,aAAa;AACtC,mBAAS,UAAU,SAAS,eAAe,UAAU;AACrD,mBAAS,cAAc;AACvB,mCAAyB,SAAS,QAAQ,cAAc;AAExD,eAAK,aAAa,OAAO,KAAK,OAAO,cAAc,GAAG,GAAG,QAAQ;AACjE,eAAK,oBAAoB;AACzB,eAAK,OAAO,SAAS;AACrB,eAAK,OAAO,QAAQ,QAAQ;AAE5B,YAAE,OAAO,EAAE,IAAI,mBAAmB,CAAC,MAAM;AACxC,iBAAK,aAAa,OAAO,KAAK,OAAO,aAAa,CAAC;AACnD,iBAAK,aAAa,KAAK,OAAO,cAAc,GAAG,cAAc;AAC7D,qBAAS,QAAQ,cAAc;AAC/B,iBAAK,oBAAoB;AACzB,iBAAK,OAAO,aAAa;AACzB,iBAAK,OAAO,QAAQ,QAAQ;AAAA,UAC7B,CAAC;AAAA,QACF,CAAC;AAAA,MACF;AAEA,UAAI,cAAc;AAClB,UAAI,mBAAmB,cAAc;AACpC,sBAAc;AAAA,MACf;AACA,aAAO;AAAA,QACN;AAAA,QACA;AAAA,QACA,SAAS;AAAA,UACR;AAAA,UACA;AAAA,UACA,UAAU,OAAO,OAAO,KAAK,YAAY,QAAQ;AAAA,QAClD;AAAA,QACA,QAAQ;AAAA,QACR;AAAA,QACA;AAAA,MACD;AAAA,IACD;AAAA,IAEA,oBAAoB,QAAQ,CAAC,GAAG;AAC/B,UAAI,MAAM,UAAU,GAAG;AACtB,gBAAQ,KAAK;AAAA,MACd;AACA,WAAK,OAAO,YAAY,KAAK;AAAA,IAC9B;AAAA,IAEA,MAAM,MAAM,GAAG;AACd,UAAI,KAAK,aAAa,UAAU,GAAG;AAClC;AAAA,MACD;AACA,WAAK,OAAO,MAAM,GAAG;AAAA,IACtB;AAAA,IAEA,mBAAmB,MAAM,OAAO,aAAa;AAC5C,iBAAW,MAAM;AAChB,cAAM,gBAAgB,EAAE,gBAAgB;AACxC,cAAM,qBAAqB;AAAA,UAC1B,SAAS,cAAc;AAAA,UACvB,YAAY;AAAA,UACZ,kBAAkB;AAAA,UAClB,SAAS;AAAA,YACR;AAAA,YACA;AAAA,YACA,UAAU;AAAA,YACV,aAAa,GAAG,MAAM;AAAA,UACvB;AAAA,QACD;AACA,aAAK,aAAa,OAAO,OAAO,GAAG,GAAG,kBAAkB;AACxD,aAAK,oBAAoB;AACzB,aAAK,OAAO,MAAM;AAClB,aAAK,OAAO,MAAM,OAAO,CAAC;AAC1B,aAAK,OAAO,QAAQ,QAAQ;AAC5B,sBAAc,QAAQ,QAAQ,EAAE,IAAI,iBAAiB,MAAM;AAC1D,eAAK,aAAa,OAAO,KAAK,OAAO,aAAa,CAAC;AACnD,eAAK,oBAAoB;AACzB,eAAK,OAAO,aAAa;AACzB,eAAK,OAAO,SAAS;AACrB,eAAK,OAAO,QAAQ,QAAQ;AAAA,QAC7B,CAAC;AAAA,MACF,GAAG,GAAG;AAAA,IACP;AAAA,EACD;AAEA,SAAO,GAAG,uBAAuB,MAAM;AAlQvC;AAqQC,QAAI,CAAC,OAAO,WAAW,2BAA2B,EAAE;AAAS;AAE7D,WAAO,OAAO,KAAK,oBAAoB,eAAe,OAAO,KAAK,oBAAoB,CAAC;AACvF,WAAO,OAAO,KAAK,KAAK,qBAAqB,eAC5C,OAAO,KAAK,KAAK,qBAAqB,CAAC;AACxC,QAAI,QAAQ,OAAO,OAAO;AAC1B,QAAI,MAAM,OAAO;AAAI;AAErB,QAAI;AACJ,QAAI,iBAAiB,CAAC;AACtB,QAAI;AACJ,QAAI,MAAM,MAAM,gBAAgB;AAC/B,cAAQ,CAAC,QAAQ,MAAM,IAAI,QAAQ;AAAA,IACpC;AACA,QAAI,MAAM,MAAM,kBAAkB;AACjC,aAAO,KAAK,oBACX,OAAO,KAAK,iBAAiB,QAAQ,CAACC,UAAS;AAC9C,YAAI,aAAaA,MAAK;AACtB,YAAI,SAAS,KAAK,IAAI,MAAM,QAAQ,WAAW,MAAM;AACrD,YAAI,UAAU,KAAK,MAAM,MAAM,WAAW;AAAI;AAC9C,YAAI,UAAU,KAAK,WAAW,MAAM,OAAO,MAAM,MAAM,WAAW;AAAI;AACtE,YACC,UAAU,KACV,CAAC,KAAK,OAAO,EAAE,QAAQ,WAAW,EAAE,KAAK,MACzC,MAAM,MAAM,WAAW;AAEvB;AACD,uBAAe,KAAKA,KAAI;AAAA,MACzB,CAAC;AAAA,IACH;AACA,qBAAiB,eAAe,OAAO,CAACA,UAAS;AAnSlD,UAAAD;AAoSE,YAAIA,MAAA,OAAO,KAAK,KAAK,kBAAkBC,MAAK,QAAxC,gBAAAD,IAA6C,gBAAe;AAAM,eAAO;AAC7E,aAAO;AAAA,IACR,CAAC;AACD,qBAAiB,eAAe,IAAI,CAACC,UAAS;AAvS/C,UAAAD;AAwSE,YAAIA,MAAA,OAAO,KAAK,KAAK,kBAAkBC,MAAK,QAAxC,gBAAAD,IAA6C,mBAAkB,QAAW;AAC7E,QAAAC,MAAK,KAAK,OAAO,KAAK,KAAK,kBAAkBA,MAAK,IAAI,cAAc;AAAA,MACrE;AACA,aAAOA;AAAA,IACR,CAAC;AACD,QAAI,eAAe,UAAU;AAAG;AAChC,QAAI,eAAe,eAAe;AAAA,MACjC,CAACA,UAAM;AA/ST,YAAAD,KAAA;AA+SY,eAAAC,MAAK,QAAM,MAAAD,MAAA,OAAO,GAAG,wBAAV,gBAAAA,IAA+B,SAA/B,mBAAqC;AAAA;AAAA,IAC3D;AACA,QAAI,YAAY,eAAe,KAAK,CAACC,UAASA,MAAK,MAAM,OAAO,GAAG,cAAc;AACjF,QAAI,cAAc;AACjB,kBAAY,aAAa;AACzB,mBAAa,aAAa,GAAG,EAAE;AAC/B,UAAI,OAAO,cAAc,UAAU;AAClC,qBAAa;AAAA,MACd;AAAA,IACD,WAAW,WAAW;AACrB,kBAAY,UAAU;AACtB,mBAAa,UAAU,GAAG,EAAE;AAC5B,UAAI,OAAO,cAAc,UAAU;AAClC,qBAAa;AAAA,MACd,OAAO;AACN,sBAAc;AAAA,MACf;AACA,aAAO,GAAG,iBAAiB;AAAA,IAC5B,OAAO;AACN,kBAAY,eAAe,GAAG;AAC9B,mBAAa,eAAe,GAAG,GAAG,EAAE;AACpC,UAAI,OAAO,cAAc,UAAU;AAClC,qBAAa;AAAA,MACd,OAAO;AACN,sBAAc;AAAA,MACf;AAAA,IACD;AACA,QAAI,CAAC;AAAW;AAChB,SAAI,YAAO,GAAG,wBAAV,mBAA+B,QAAQ;AAC1C,aAAO,GAAG,oBAAoB,eAAe,CAAC;AAC9C,aAAO,GAAG,oBAAoB,OAAO,MAAM,IAAI;AAC/C,aAAO,GAAG,oBAAoB,oBAAoB;AAAA,IACnD;AACA,UAAM,OAAQ,OAAO,GAAG,sBAAsB,IAAI,OAAO,GAAG,eAAe;AAE3E,UAAM,gBAAgB,YAAY,MAAM;AACvC,UAAI,qCAAU,KAAK,cAAc;AAAgC;AACjE,UAAI,qCAAU,KAAK,cAAc;AAAwB;AACzD,UAAI,SAAS,KAAK,aAAa,iBAAiB,MAAM,YAAY;AACjE,eAAO,MAAM,MAAM,GAAG,EAAE,KAAK,MAAM;AAClC,eAAK,KAAK;AAAA,YACT;AAAA,YACA;AAAA,UACD,CAAC;AACD,wBAAc,aAAa;AAAA,QAC5B,CAAC;AAAA,MACF;AAAA,IACD,GAAG,GAAG;AAAA,EACP;AAEA,SAAO,OAAO,GAAG,UAAU,MAAM;AAChC,WAAO,GAAG,qBAAqB;AAAA,EAChC,CAAC;",
  "names": ["_a", "tour"]
}
