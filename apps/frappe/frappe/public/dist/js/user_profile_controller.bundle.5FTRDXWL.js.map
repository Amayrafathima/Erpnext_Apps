{
  "version": 3,
  "sources": ["../../../../../apps/frappe/frappe/public/js/frappe/form/footer/base_timeline.js", "../../../../../apps/frappe/frappe/desk/page/user_profile/user_profile_controller.js"],
  "sourcesContent": ["// Copyright (c) 2020, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nclass BaseTimeline {\n\tconstructor(opts) {\n\t\tObject.assign(this, opts);\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tthis.timeline_wrapper = $(`<div class=\"new-timeline\">`);\n\t\tthis.wrapper = this.timeline_wrapper;\n\t\tthis.timeline_items_wrapper = $(`<div class=\"timeline-items\">`);\n\t\tthis.timeline_actions_wrapper = $(`\n\t\t\t<div class=\"timeline-items timeline-actions\">\n\t\t\t\t<div class=\"timeline-item\">\n\t\t\t\t\t<div class=\"timeline-content action-buttons\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\n\t\tthis.timeline_wrapper.append(this.timeline_actions_wrapper);\n\t\tthis.timeline_actions_wrapper.hide();\n\t\tthis.timeline_wrapper.append(this.timeline_items_wrapper);\n\n\t\tthis.parent.replaceWith(this.timeline_wrapper);\n\t\tthis.timeline_items = [];\n\t}\n\n\trefresh() {\n\t\tthis.render_timeline_items();\n\t}\n\n\tadd_action_button(label, action, icon = null, btn_class = null) {\n\t\tlet icon_element = icon ? frappe.utils.icon(icon, \"xs\") : null;\n\t\tthis.timeline_actions_wrapper.show();\n\t\tlet action_btn = $(`<button class=\"btn btn-xs ${btn_class || \"btn-default\"} action-btn\">\n\t\t\t${icon_element}\n\t\t\t${label}\n\t\t</button>`);\n\t\taction_btn.click(action);\n\t\tthis.timeline_actions_wrapper.find(\".action-buttons\").append(action_btn);\n\t\treturn action_btn;\n\t}\n\n\trender_timeline_items() {\n\t\tthis.timeline_items_wrapper.empty();\n\t\tthis.timeline_items = [];\n\t\tthis.doc_info = (this.frm && this.frm.get_docinfo()) || {};\n\t\tlet response = this.prepare_timeline_contents();\n\t\tif (response instanceof Promise) {\n\t\t\tresponse.then(() => {\n\t\t\t\tthis.timeline_items.sort(\n\t\t\t\t\t(item1, item2) => new Date(item2.creation) - new Date(item1.creation)\n\t\t\t\t);\n\t\t\t\tthis.timeline_items.forEach(this.add_timeline_item.bind(this));\n\t\t\t});\n\t\t} else {\n\t\t\tthis.timeline_items.sort(\n\t\t\t\t(item1, item2) => new Date(item2.creation) - new Date(item1.creation)\n\t\t\t);\n\t\t\tthis.timeline_items.forEach(this.add_timeline_item.bind(this));\n\t\t}\n\t}\n\n\tprepare_timeline_contents() {\n\t\t//\n\t}\n\n\tadd_timeline_item(item, append_at_the_end = false) {\n\t\tlet timeline_item = this.get_timeline_item(item);\n\t\tif (append_at_the_end) {\n\t\t\tthis.timeline_items_wrapper.append(timeline_item);\n\t\t} else {\n\t\t\tthis.timeline_items_wrapper.prepend(timeline_item);\n\t\t}\n\t\treturn timeline_item;\n\t}\n\n\tadd_timeline_items(items, append_at_the_end = false) {\n\t\titems.forEach((item) => this.add_timeline_item(item, append_at_the_end));\n\t}\n\n\tadd_timeline_items_based_on_creation(items) {\n\t\titems.forEach((item) => {\n\t\t\tthis.timeline_items_wrapper.find(\".timeline-item\").each((i, el) => {\n\t\t\t\tlet creation = $(el).attr(\"data-timestamp\");\n\t\t\t\tif (creation && new Date(creation) < new Date(item.creation)) {\n\t\t\t\t\t$(el).before(this.get_timeline_item(item));\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tget_timeline_item(item) {\n\t\t// item can have content*, creation*,\n\t\t// timeline_badge, icon, icon_size,\n\t\t// hide_timestamp, is_card\n\t\tconst timeline_item = $(`<div class=\"timeline-item\">`);\n\n\t\tif (item.name == \"load-more\") {\n\t\t\ttimeline_item.append(\n\t\t\t\t`<div class=\"timeline-load-more\">\n\t\t\t\t\t<button class=\"btn btn-default btn-sm btn-load-more\">\n\t\t\t\t\t\t<span>${item.content}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>`\n\t\t\t);\n\t\t\ttimeline_item.find(\".btn-load-more\").on(\"click\", async () => {\n\t\t\t\tlet more_items = await this.get_more_communication_timeline_contents();\n\t\t\t\ttimeline_item.remove();\n\t\t\t\tthis.add_timeline_items_based_on_creation(more_items);\n\t\t\t});\n\t\t\treturn timeline_item;\n\t\t}\n\n\t\ttimeline_item.attr({\n\t\t\t\"data-doctype\": item.doctype,\n\t\t\t\"data-name\": item.name,\n\t\t\t\"data-timestamp\": item.creation,\n\t\t});\n\t\tif (item.icon) {\n\t\t\ttimeline_item.append(`\n\t\t\t\t<div class=\"timeline-badge\" title='${item.title || frappe.utils.to_title_case(item.icon)}'>\n\t\t\t\t\t${frappe.utils.icon(item.icon, item.icon_size || \"md\", item.icon_class || \"\")}\n\t\t\t\t</div>\n\t\t\t`);\n\t\t} else if (item.timeline_badge) {\n\t\t\ttimeline_item.append(item.timeline_badge);\n\t\t} else {\n\t\t\ttimeline_item.append(`<div class=\"timeline-dot\">`);\n\t\t}\n\n\t\ttimeline_item.append(\n\t\t\t`<div class=\"timeline-content ${item.is_card ? \"frappe-card\" : \"\"}\">`\n\t\t);\n\t\tlet timeline_content = timeline_item.find(\".timeline-content\");\n\t\ttimeline_content.append(item.content);\n\t\tif (!item.hide_timestamp && !item.is_card) {\n\t\t\ttimeline_content.append(`<span> \u00B7 ${comment_when(item.creation)}</span>`);\n\t\t}\n\t\tif (item.id) {\n\t\t\ttimeline_content.attr(\"id\", item.id);\n\t\t}\n\n\t\treturn timeline_item;\n\t}\n}\n\nexport default BaseTimeline;\n", "import BaseTimeline from \"../../../public/js/frappe/form/footer/base_timeline\";\nfrappe.provide(\"frappe.energy_points\");\n\nclass UserProfile {\n\tconstructor(wrapper) {\n\t\tthis.wrapper = $(wrapper);\n\t\tthis.page = frappe.ui.make_app_page({\n\t\t\tparent: wrapper,\n\t\t});\n\t\tthis.sidebar = this.wrapper.find(\".layout-side-section\");\n\t\tthis.main_section = this.wrapper.find(\".layout-main-section\");\n\t\tthis.wrapper.bind(\"show\", () => {\n\t\t\tthis.show();\n\t\t});\n\t}\n\n\tshow() {\n\t\tlet route = frappe.get_route();\n\t\tthis.user_id = route[1] || frappe.session.user;\n\t\tfrappe.dom.freeze(__(\"Loading user profile\") + \"...\");\n\t\tfrappe.db.exists(\"User\", this.user_id).then((exists) => {\n\t\t\tfrappe.dom.unfreeze();\n\t\t\tif (exists) {\n\t\t\t\tthis.make_user_profile();\n\t\t\t} else {\n\t\t\t\tfrappe.msgprint(__(\"User does not exist\"));\n\t\t\t}\n\t\t});\n\t}\n\n\tmake_user_profile() {\n\t\tthis.user = frappe.user_info(this.user_id);\n\t\tthis.page.set_title(this.user.fullname);\n\t\tthis.setup_user_search();\n\t\tthis.main_section.empty().append(frappe.render_template(\"user_profile\"));\n\t\tthis.energy_points = 0;\n\t\tthis.review_points = 0;\n\t\tthis.rank = 0;\n\t\tthis.month_rank = 0;\n\t\tthis.render_user_details();\n\t\tthis.render_points_and_rank();\n\t\tthis.render_heatmap();\n\t\tthis.render_line_chart();\n\t\tthis.render_percentage_chart(\"type\", \"Type Distribution\");\n\t\tthis.create_percentage_chart_filters();\n\t\tthis.setup_user_activity_timeline();\n\t}\n\n\tsetup_user_search() {\n\t\tthis.$user_search_button = this.page.set_secondary_action(\n\t\t\t__(\"Change User\"),\n\t\t\t() => this.show_user_search_dialog(),\n\t\t\t{ icon: \"change\", size: \"sm\" }\n\t\t);\n\t}\n\n\tshow_user_search_dialog() {\n\t\tlet dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Change User\"),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Link\",\n\t\t\t\t\tfieldname: \"user\",\n\t\t\t\t\toptions: \"User\",\n\t\t\t\t\tlabel: __(\"User\"),\n\t\t\t\t},\n\t\t\t],\n\t\t\tprimary_action_label: __(\"Go\"),\n\t\t\tprimary_action: ({ user }) => {\n\t\t\t\tdialog.hide();\n\t\t\t\tfrappe.set_route(\"user-profile\", user);\n\t\t\t},\n\t\t});\n\t\tdialog.show();\n\t}\n\n\trender_heatmap() {\n\t\tthis.heatmap = new frappe.Chart(\".performance-heatmap\", {\n\t\t\ttype: \"heatmap\",\n\t\t\tcountLabel: \"Energy Points\",\n\t\t\tdata: {},\n\t\t\tdiscreteDomains: 1,\n\t\t\tradius: 3,\n\t\t\theight: 150,\n\t\t});\n\t\tthis.update_heatmap_data();\n\t\tthis.create_heatmap_chart_filters();\n\t}\n\n\tupdate_heatmap_data(date_from) {\n\t\tfrappe\n\t\t\t.xcall(\"frappe.desk.page.user_profile.user_profile.get_energy_points_heatmap_data\", {\n\t\t\t\tuser: this.user_id,\n\t\t\t\tdate: date_from || frappe.datetime.year_start(),\n\t\t\t})\n\t\t\t.then((r) => {\n\t\t\t\tthis.heatmap.update({ dataPoints: r });\n\t\t\t});\n\t}\n\n\trender_line_chart() {\n\t\tthis.line_chart_filters = [\n\t\t\t[\"Energy Point Log\", \"user\", \"=\", this.user_id, false],\n\t\t\t[\"Energy Point Log\", \"type\", \"!=\", \"Review\", false],\n\t\t];\n\n\t\tthis.line_chart_config = {\n\t\t\ttimespan: \"Last Month\",\n\t\t\ttime_interval: \"Daily\",\n\t\t\ttype: \"Line\",\n\t\t\tvalue_based_on: \"points\",\n\t\t\tchart_type: \"Sum\",\n\t\t\tdocument_type: \"Energy Point Log\",\n\t\t\tname: \"Energy Points\",\n\t\t\twidth: \"half\",\n\t\t\tbased_on: \"creation\",\n\t\t};\n\n\t\tthis.line_chart = new frappe.Chart(\".performance-line-chart\", {\n\t\t\ttype: \"line\",\n\t\t\theight: 200,\n\t\t\tdata: {\n\t\t\t\tlabels: [],\n\t\t\t\tdatasets: [{}],\n\t\t\t},\n\t\t\tcolors: [\"purple\"],\n\t\t\taxisOptions: {\n\t\t\t\txIsSeries: 1,\n\t\t\t},\n\t\t});\n\t\tthis.update_line_chart_data();\n\t\tthis.create_line_chart_filters();\n\t}\n\n\tupdate_line_chart_data() {\n\t\tthis.line_chart_config.filters_json = JSON.stringify(this.line_chart_filters);\n\n\t\tfrappe\n\t\t\t.xcall(\"frappe.desk.doctype.dashboard_chart.dashboard_chart.get\", {\n\t\t\t\tchart: this.line_chart_config,\n\t\t\t\tno_cache: 1,\n\t\t\t})\n\t\t\t.then((chart) => {\n\t\t\t\tthis.line_chart.update(chart);\n\t\t\t});\n\t}\n\n\trender_percentage_chart(field, title) {\n\t\tfrappe\n\t\t\t.xcall(\n\t\t\t\t\"frappe.desk.page.user_profile.user_profile.get_energy_points_percentage_chart_data\",\n\t\t\t\t{\n\t\t\t\t\tuser: this.user_id,\n\t\t\t\t\tfield: field,\n\t\t\t\t}\n\t\t\t)\n\t\t\t.then((chart) => {\n\t\t\t\tif (chart.labels.length) {\n\t\t\t\t\tthis.percentage_chart = new frappe.Chart(\".performance-percentage-chart\", {\n\t\t\t\t\t\ttype: \"percentage\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tlabels: chart.labels,\n\t\t\t\t\t\t\tdatasets: chart.datasets,\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttruncateLegends: 1,\n\t\t\t\t\t\tbarOptions: {\n\t\t\t\t\t\t\theight: 11,\n\t\t\t\t\t\t\tdepth: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t\theight: 200,\n\t\t\t\t\t\tmaxSlices: 8,\n\t\t\t\t\t\tcolors: [\n\t\t\t\t\t\t\t\"purple\",\n\t\t\t\t\t\t\t\"blue\",\n\t\t\t\t\t\t\t\"cyan\",\n\t\t\t\t\t\t\t\"teal\",\n\t\t\t\t\t\t\t\"pink\",\n\t\t\t\t\t\t\t\"red\",\n\t\t\t\t\t\t\t\"orange\",\n\t\t\t\t\t\t\t\"yellow\",\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.wrapper.find(\".percentage-chart-container\").hide();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tcreate_line_chart_filters() {\n\t\tlet filters = [\n\t\t\t{\n\t\t\t\tlabel: \"All\",\n\t\t\t\toptions: [\"All\", \"Auto\", \"Criticism\", \"Appreciation\", \"Revert\"],\n\t\t\t\taction: (selected_item) => {\n\t\t\t\t\tif (selected_item === \"All\") {\n\t\t\t\t\t\tthis.line_chart_filters = [\n\t\t\t\t\t\t\t[\"Energy Point Log\", \"user\", \"=\", this.user_id, false],\n\t\t\t\t\t\t\t[\"Energy Point Log\", \"type\", \"!=\", \"Review\", false],\n\t\t\t\t\t\t];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.line_chart_filters[1] = [\n\t\t\t\t\t\t\t\"Energy Point Log\",\n\t\t\t\t\t\t\t\"type\",\n\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\tselected_item,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t\tthis.update_line_chart_data();\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Last Month\",\n\t\t\t\toptions: [\"Last Week\", \"Last Month\", \"Last Quarter\", \"Last Year\"],\n\t\t\t\taction: (selected_item) => {\n\t\t\t\t\tthis.line_chart_config.timespan = selected_item;\n\t\t\t\t\tthis.update_line_chart_data();\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Daily\",\n\t\t\t\toptions: [\"Daily\", \"Weekly\", \"Monthly\"],\n\t\t\t\taction: (selected_item) => {\n\t\t\t\t\tthis.line_chart_config.time_interval = selected_item;\n\t\t\t\t\tthis.update_line_chart_data();\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\tfrappe.dashboard_utils.render_chart_filters(\n\t\t\tfilters,\n\t\t\t\"chart-filter\",\n\t\t\t\".line-chart-options\",\n\t\t\t1\n\t\t);\n\t}\n\n\tcreate_percentage_chart_filters() {\n\t\tlet filters = [\n\t\t\t{\n\t\t\t\tlabel: \"Type\",\n\t\t\t\toptions: [\"Type\", \"Reference Doctype\", \"Rule\"],\n\t\t\t\tfieldnames: [\"type\", \"reference_doctype\", \"rule\"],\n\t\t\t\taction: (selected_item, fieldname) => {\n\t\t\t\t\tlet title = selected_item + \" Distribution\";\n\t\t\t\t\tthis.render_percentage_chart(fieldname, title);\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\tfrappe.dashboard_utils.render_chart_filters(\n\t\t\tfilters,\n\t\t\t\"chart-filter\",\n\t\t\t\".percentage-chart-options\"\n\t\t);\n\t}\n\n\tcreate_heatmap_chart_filters() {\n\t\tlet filters = [\n\t\t\t{\n\t\t\t\tlabel: frappe.dashboard_utils.get_year(frappe.datetime.now_date()),\n\t\t\t\toptions: frappe.dashboard_utils.get_years_since_creation(\n\t\t\t\t\tfrappe.boot.user.creation\n\t\t\t\t),\n\t\t\t\taction: (selected_item) => {\n\t\t\t\t\tthis.update_heatmap_data(frappe.datetime.obj_to_str(selected_item));\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\tfrappe.dashboard_utils.render_chart_filters(filters, \"chart-filter\", \".heatmap-options\");\n\t}\n\n\tedit_profile() {\n\t\tlet edit_profile_dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Edit Profile\"),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Attach Image\",\n\t\t\t\t\tfieldname: \"user_image\",\n\t\t\t\t\tlabel: \"Profile Image\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\tfieldname: \"interest\",\n\t\t\t\t\tlabel: \"Interests\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\tfieldname: \"location\",\n\t\t\t\t\tlabel: \"Location\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\t\tfieldname: \"Interest\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Small Text\",\n\t\t\t\t\tfieldname: \"bio\",\n\t\t\t\t\tlabel: \"Bio\",\n\t\t\t\t},\n\t\t\t],\n\t\t\tprimary_action: (values) => {\n\t\t\t\tedit_profile_dialog.disable_primary_action();\n\t\t\t\tfrappe\n\t\t\t\t\t.xcall(\"frappe.desk.page.user_profile.user_profile.update_profile_info\", {\n\t\t\t\t\t\tprofile_info: values,\n\t\t\t\t\t})\n\t\t\t\t\t.then((user) => {\n\t\t\t\t\t\tuser.image = user.user_image;\n\t\t\t\t\t\tthis.user = Object.assign(values, user);\n\t\t\t\t\t\tedit_profile_dialog.hide();\n\t\t\t\t\t\tthis.render_user_details();\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tedit_profile_dialog.enable_primary_action();\n\t\t\t\t\t});\n\t\t\t},\n\t\t\tprimary_action_label: __(\"Save\"),\n\t\t});\n\n\t\tedit_profile_dialog.set_values({\n\t\t\tuser_image: this.user.image,\n\t\t\tlocation: this.user.location,\n\t\t\tinterest: this.user.interest,\n\t\t\tbio: this.user.bio,\n\t\t});\n\t\tedit_profile_dialog.show();\n\t}\n\n\trender_user_details() {\n\t\tthis.sidebar.empty().append(\n\t\t\tfrappe.render_template(\"user_profile_sidebar\", {\n\t\t\t\tuser_image: this.user.image,\n\t\t\t\tuser_abbr: this.user.abbr,\n\t\t\t\tuser_location: this.user.location,\n\t\t\t\tuser_interest: this.user.interest,\n\t\t\t\tuser_bio: this.user.bio,\n\t\t\t})\n\t\t);\n\n\t\tthis.setup_user_profile_links();\n\t}\n\n\tsetup_user_profile_links() {\n\t\tif (this.user_id !== frappe.session.user) {\n\t\t\tthis.wrapper.find(\".profile-links\").hide();\n\t\t} else {\n\t\t\tthis.wrapper.find(\".edit-profile-link\").on(\"click\", () => {\n\t\t\t\tthis.edit_profile();\n\t\t\t});\n\n\t\t\tthis.wrapper.find(\".user-settings-link\").on(\"click\", () => {\n\t\t\t\tthis.go_to_user_settings();\n\t\t\t});\n\t\t}\n\t}\n\n\tget_user_rank() {\n\t\treturn frappe\n\t\t\t.xcall(\"frappe.desk.page.user_profile.user_profile.get_user_rank\", {\n\t\t\t\tuser: this.user_id,\n\t\t\t})\n\t\t\t.then((r) => {\n\t\t\t\tif (r.monthly_rank.length) this.month_rank = r.monthly_rank[0];\n\t\t\t\tif (r.all_time_rank.length) this.rank = r.all_time_rank[0];\n\t\t\t});\n\t}\n\n\tget_user_points() {\n\t\treturn frappe\n\t\t\t.xcall(\n\t\t\t\t\"frappe.social.doctype.energy_point_log.energy_point_log.get_user_energy_and_review_points\",\n\t\t\t\t{\n\t\t\t\t\tuser: this.user_id,\n\t\t\t\t}\n\t\t\t)\n\t\t\t.then((r) => {\n\t\t\t\tif (r[this.user_id]) {\n\t\t\t\t\tthis.energy_points = r[this.user_id].energy_points;\n\t\t\t\t\tthis.review_points = r[this.user_id].review_points;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trender_points_and_rank() {\n\t\tlet $profile_details = this.wrapper.find(\".user-stats\");\n\t\tlet $profile_details_wrapper = this.wrapper.find(\".user-stats-detail\");\n\n\t\tconst _get_stat_dom = (value, label, icon) => {\n\t\t\treturn `<div class=\"user-stats-item mt-4\">\n\t\t\t\t${frappe.utils.icon(icon, \"lg\", \"no-stroke\")}\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"stat-value\">${value}</div>\n\t\t\t\t\t<div class=\"stat-label\">${label}</div>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t\t};\n\n\t\tthis.get_user_rank().then(() => {\n\t\t\tthis.get_user_points().then(() => {\n\t\t\t\tlet html = $(`\n\t\t\t\t\t${_get_stat_dom(this.energy_points, __(\"Energy Points\"), \"color-energy-points\")}\n\t\t\t\t\t${_get_stat_dom(this.review_points, __(\"Review Points\"), \"color-review-points\")}\n\t\t\t\t\t${_get_stat_dom(this.rank, __(\"Rank\"), \"color-rank\")}\n\t\t\t\t\t${_get_stat_dom(this.month_rank, __(\"Monthly Rank\"), \"color-monthly-rank\")}\n\t\t\t\t`);\n\n\t\t\t\t$profile_details.append(html);\n\t\t\t\t$profile_details_wrapper.removeClass(\"hide\");\n\t\t\t});\n\t\t});\n\t}\n\n\tgo_to_user_settings() {\n\t\tfrappe.set_route(\"Form\", \"User\", this.user_id);\n\t}\n\n\tsetup_user_activity_timeline() {\n\t\tthis.user_activity_timeline = new UserProfileTimeline({\n\t\t\tparent: this.wrapper.find(\".recent-activity-list\"),\n\t\t\tfooter: this.wrapper.find(\".recent-activity-footer\"),\n\t\t\tuser: this.user_id,\n\t\t});\n\n\t\tthis.user_activity_timeline.refresh();\n\t}\n}\n\nclass UserProfileTimeline extends BaseTimeline {\n\tmake() {\n\t\tsuper.make();\n\t\tthis.activity_start = 0;\n\t\tthis.activity_limit = 20;\n\t\tthis.setup_show_more_activity();\n\t}\n\tprepare_timeline_contents() {\n\t\treturn this.get_user_activity_data().then((activities) => {\n\t\t\tif (!activities.length) {\n\t\t\t\tthis.show_more_button.hide();\n\t\t\t\tthis.timeline_wrapper.html(`<div>${__(\"No activities to show\")}</div>`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.show_more_button.toggle(activities.length === this.activity_limit);\n\t\t\tthis.timeline_items = activities.map((activity) =>\n\t\t\t\tthis.get_activity_timeline_item(activity)\n\t\t\t);\n\t\t});\n\t}\n\n\tget_user_activity_data() {\n\t\treturn frappe.xcall(\"frappe.desk.page.user_profile.user_profile.get_energy_points_list\", {\n\t\t\tstart: this.activity_start,\n\t\t\tlimit: this.activity_limit,\n\t\t\tuser: this.user,\n\t\t});\n\t}\n\n\tget_activity_timeline_item(data) {\n\t\tlet icon =\n\t\t\tdata.type == \"Appreciation\" ? \"clap\" : data.type == \"Criticism\" ? \"criticize\" : null;\n\t\treturn {\n\t\t\ticon: icon,\n\t\t\tcreation: data.creation,\n\t\t\tis_card: true,\n\t\t\tcontent: frappe.energy_points.format_history_log(data),\n\t\t};\n\t}\n\n\tsetup_show_more_activity() {\n\t\tthis.show_more_button = $(\n\t\t\t`<a class=\"show-more-activity-btn\">${__(\"Show More Activity\")}</a>`\n\t\t);\n\t\tthis.show_more_button.hide();\n\t\tthis.footer.append(this.show_more_button);\n\t\tthis.show_more_button.on(\"click\", () => this.show_more_activity());\n\t}\n\n\tshow_more_activity() {\n\t\tthis.activity_start += this.activity_limit;\n\t\tthis.get_user_activity_data().then((activities) => {\n\t\t\tif (!activities.length || activities.length < this.activity_limit) {\n\t\t\t\tthis.show_more_button.hide();\n\t\t\t}\n\t\t\tlet timeline_items = activities.map((activity) =>\n\t\t\t\tthis.get_activity_timeline_item(activity)\n\t\t\t);\n\t\t\ttimeline_items.map((item) => this.add_timeline_item(item, true));\n\t\t});\n\t}\n}\n\nfrappe.provide(\"frappe.ui\");\nfrappe.ui.UserProfile = UserProfile;\n"],
  "mappings": ";;AAGA,MAAM,eAAN,MAAmB;AAAA,IAClB,YAAY,MAAM;AACjB,aAAO,OAAO,MAAM,IAAI;AACxB,WAAK,KAAK;AAAA,IACX;AAAA,IAEA,OAAO;AACN,WAAK,mBAAmB,EAAE,4BAA4B;AACtD,WAAK,UAAU,KAAK;AACpB,WAAK,yBAAyB,EAAE,8BAA8B;AAC9D,WAAK,2BAA2B,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAMjC;AAED,WAAK,iBAAiB,OAAO,KAAK,wBAAwB;AAC1D,WAAK,yBAAyB,KAAK;AACnC,WAAK,iBAAiB,OAAO,KAAK,sBAAsB;AAExD,WAAK,OAAO,YAAY,KAAK,gBAAgB;AAC7C,WAAK,iBAAiB,CAAC;AAAA,IACxB;AAAA,IAEA,UAAU;AACT,WAAK,sBAAsB;AAAA,IAC5B;AAAA,IAEA,kBAAkB,OAAO,QAAQ,OAAO,MAAM,YAAY,MAAM;AAC/D,UAAI,eAAe,OAAO,OAAO,MAAM,KAAK,MAAM,IAAI,IAAI;AAC1D,WAAK,yBAAyB,KAAK;AACnC,UAAI,aAAa,EAAE,6BAA6B,aAAa;AAAA,KAC1D;AAAA,KACA;AAAA,YACO;AACV,iBAAW,MAAM,MAAM;AACvB,WAAK,yBAAyB,KAAK,iBAAiB,EAAE,OAAO,UAAU;AACvE,aAAO;AAAA,IACR;AAAA,IAEA,wBAAwB;AACvB,WAAK,uBAAuB,MAAM;AAClC,WAAK,iBAAiB,CAAC;AACvB,WAAK,WAAY,KAAK,OAAO,KAAK,IAAI,YAAY,KAAM,CAAC;AACzD,UAAI,WAAW,KAAK,0BAA0B;AAC9C,UAAI,oBAAoB,SAAS;AAChC,iBAAS,KAAK,MAAM;AACnB,eAAK,eAAe;AAAA,YACnB,CAAC,OAAO,UAAU,IAAI,KAAK,MAAM,QAAQ,IAAI,IAAI,KAAK,MAAM,QAAQ;AAAA,UACrE;AACA,eAAK,eAAe,QAAQ,KAAK,kBAAkB,KAAK,IAAI,CAAC;AAAA,QAC9D,CAAC;AAAA,MACF,OAAO;AACN,aAAK,eAAe;AAAA,UACnB,CAAC,OAAO,UAAU,IAAI,KAAK,MAAM,QAAQ,IAAI,IAAI,KAAK,MAAM,QAAQ;AAAA,QACrE;AACA,aAAK,eAAe,QAAQ,KAAK,kBAAkB,KAAK,IAAI,CAAC;AAAA,MAC9D;AAAA,IACD;AAAA,IAEA,4BAA4B;AAAA,IAE5B;AAAA,IAEA,kBAAkB,MAAM,oBAAoB,OAAO;AAClD,UAAI,gBAAgB,KAAK,kBAAkB,IAAI;AAC/C,UAAI,mBAAmB;AACtB,aAAK,uBAAuB,OAAO,aAAa;AAAA,MACjD,OAAO;AACN,aAAK,uBAAuB,QAAQ,aAAa;AAAA,MAClD;AACA,aAAO;AAAA,IACR;AAAA,IAEA,mBAAmB,OAAO,oBAAoB,OAAO;AACpD,YAAM,QAAQ,CAAC,SAAS,KAAK,kBAAkB,MAAM,iBAAiB,CAAC;AAAA,IACxE;AAAA,IAEA,qCAAqC,OAAO;AAC3C,YAAM,QAAQ,CAAC,SAAS;AACvB,aAAK,uBAAuB,KAAK,gBAAgB,EAAE,KAAK,CAAC,GAAG,OAAO;AAClE,cAAI,WAAW,EAAE,EAAE,EAAE,KAAK,gBAAgB;AAC1C,cAAI,YAAY,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,KAAK,QAAQ,GAAG;AAC7D,cAAE,EAAE,EAAE,OAAO,KAAK,kBAAkB,IAAI,CAAC;AACzC,mBAAO;AAAA,UACR;AAAA,QACD,CAAC;AAAA,MACF,CAAC;AAAA,IACF;AAAA,IAEA,kBAAkB,MAAM;AAIvB,YAAM,gBAAgB,EAAE,6BAA6B;AAErD,UAAI,KAAK,QAAQ,aAAa;AAC7B,sBAAc;AAAA,UACb;AAAA;AAAA,cAEU,KAAK;AAAA;AAAA;AAAA,QAGhB;AACA,sBAAc,KAAK,gBAAgB,EAAE,GAAG,SAAS,YAAY;AAC5D,cAAI,aAAa,MAAM,KAAK,yCAAyC;AACrE,wBAAc,OAAO;AACrB,eAAK,qCAAqC,UAAU;AAAA,QACrD,CAAC;AACD,eAAO;AAAA,MACR;AAEA,oBAAc,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,kBAAkB,KAAK;AAAA,MACxB,CAAC;AACD,UAAI,KAAK,MAAM;AACd,sBAAc,OAAO;AAAA,yCACiB,KAAK,SAAS,OAAO,MAAM,cAAc,KAAK,IAAI;AAAA,OACpF,OAAO,MAAM,KAAK,KAAK,MAAM,KAAK,aAAa,MAAM,KAAK,cAAc,EAAE;AAAA;AAAA,IAE7E;AAAA,MACF,WAAW,KAAK,gBAAgB;AAC/B,sBAAc,OAAO,KAAK,cAAc;AAAA,MACzC,OAAO;AACN,sBAAc,OAAO,4BAA4B;AAAA,MAClD;AAEA,oBAAc;AAAA,QACb,gCAAgC,KAAK,UAAU,gBAAgB;AAAA,MAChE;AACA,UAAI,mBAAmB,cAAc,KAAK,mBAAmB;AAC7D,uBAAiB,OAAO,KAAK,OAAO;AACpC,UAAI,CAAC,KAAK,kBAAkB,CAAC,KAAK,SAAS;AAC1C,yBAAiB,OAAO,eAAY,aAAa,KAAK,QAAQ,UAAU;AAAA,MACzE;AACA,UAAI,KAAK,IAAI;AACZ,yBAAiB,KAAK,MAAM,KAAK,EAAE;AAAA,MACpC;AAEA,aAAO;AAAA,IACR;AAAA,EACD;AAEA,MAAO,wBAAQ;;;ACrJf,SAAO,QAAQ,sBAAsB;AAErC,MAAM,cAAN,MAAkB;AAAA,IACjB,YAAY,SAAS;AACpB,WAAK,UAAU,EAAE,OAAO;AACxB,WAAK,OAAO,OAAO,GAAG,cAAc;AAAA,QACnC,QAAQ;AAAA,MACT,CAAC;AACD,WAAK,UAAU,KAAK,QAAQ,KAAK,sBAAsB;AACvD,WAAK,eAAe,KAAK,QAAQ,KAAK,sBAAsB;AAC5D,WAAK,QAAQ,KAAK,QAAQ,MAAM;AAC/B,aAAK,KAAK;AAAA,MACX,CAAC;AAAA,IACF;AAAA,IAEA,OAAO;AACN,UAAI,QAAQ,OAAO,UAAU;AAC7B,WAAK,UAAU,MAAM,MAAM,OAAO,QAAQ;AAC1C,aAAO,IAAI,OAAO,GAAG,sBAAsB,IAAI,KAAK;AACpD,aAAO,GAAG,OAAO,QAAQ,KAAK,OAAO,EAAE,KAAK,CAAC,WAAW;AACvD,eAAO,IAAI,SAAS;AACpB,YAAI,QAAQ;AACX,eAAK,kBAAkB;AAAA,QACxB,OAAO;AACN,iBAAO,SAAS,GAAG,qBAAqB,CAAC;AAAA,QAC1C;AAAA,MACD,CAAC;AAAA,IACF;AAAA,IAEA,oBAAoB;AACnB,WAAK,OAAO,OAAO,UAAU,KAAK,OAAO;AACzC,WAAK,KAAK,UAAU,KAAK,KAAK,QAAQ;AACtC,WAAK,kBAAkB;AACvB,WAAK,aAAa,MAAM,EAAE,OAAO,OAAO,gBAAgB,cAAc,CAAC;AACvE,WAAK,gBAAgB;AACrB,WAAK,gBAAgB;AACrB,WAAK,OAAO;AACZ,WAAK,aAAa;AAClB,WAAK,oBAAoB;AACzB,WAAK,uBAAuB;AAC5B,WAAK,eAAe;AACpB,WAAK,kBAAkB;AACvB,WAAK,wBAAwB,QAAQ,mBAAmB;AACxD,WAAK,gCAAgC;AACrC,WAAK,6BAA6B;AAAA,IACnC;AAAA,IAEA,oBAAoB;AACnB,WAAK,sBAAsB,KAAK,KAAK;AAAA,QACpC,GAAG,aAAa;AAAA,QAChB,MAAM,KAAK,wBAAwB;AAAA,QACnC,EAAE,MAAM,UAAU,MAAM,KAAK;AAAA,MAC9B;AAAA,IACD;AAAA,IAEA,0BAA0B;AACzB,UAAI,SAAS,IAAI,OAAO,GAAG,OAAO;AAAA,QACjC,OAAO,GAAG,aAAa;AAAA,QACvB,QAAQ;AAAA,UACP;AAAA,YACC,WAAW;AAAA,YACX,WAAW;AAAA,YACX,SAAS;AAAA,YACT,OAAO,GAAG,MAAM;AAAA,UACjB;AAAA,QACD;AAAA,QACA,sBAAsB,GAAG,IAAI;AAAA,QAC7B,gBAAgB,CAAC,EAAE,KAAK,MAAM;AAC7B,iBAAO,KAAK;AACZ,iBAAO,UAAU,gBAAgB,IAAI;AAAA,QACtC;AAAA,MACD,CAAC;AACD,aAAO,KAAK;AAAA,IACb;AAAA,IAEA,iBAAiB;AAChB,WAAK,UAAU,IAAI,OAAO,MAAM,wBAAwB;AAAA,QACvD,MAAM;AAAA,QACN,YAAY;AAAA,QACZ,MAAM,CAAC;AAAA,QACP,iBAAiB;AAAA,QACjB,QAAQ;AAAA,QACR,QAAQ;AAAA,MACT,CAAC;AACD,WAAK,oBAAoB;AACzB,WAAK,6BAA6B;AAAA,IACnC;AAAA,IAEA,oBAAoB,WAAW;AAC9B,aACE,MAAM,6EAA6E;AAAA,QACnF,MAAM,KAAK;AAAA,QACX,MAAM,aAAa,OAAO,SAAS,WAAW;AAAA,MAC/C,CAAC,EACA,KAAK,CAAC,MAAM;AACZ,aAAK,QAAQ,OAAO,EAAE,YAAY,EAAE,CAAC;AAAA,MACtC,CAAC;AAAA,IACH;AAAA,IAEA,oBAAoB;AACnB,WAAK,qBAAqB;AAAA,QACzB,CAAC,oBAAoB,QAAQ,KAAK,KAAK,SAAS,KAAK;AAAA,QACrD,CAAC,oBAAoB,QAAQ,MAAM,UAAU,KAAK;AAAA,MACnD;AAEA,WAAK,oBAAoB;AAAA,QACxB,UAAU;AAAA,QACV,eAAe;AAAA,QACf,MAAM;AAAA,QACN,gBAAgB;AAAA,QAChB,YAAY;AAAA,QACZ,eAAe;AAAA,QACf,MAAM;AAAA,QACN,OAAO;AAAA,QACP,UAAU;AAAA,MACX;AAEA,WAAK,aAAa,IAAI,OAAO,MAAM,2BAA2B;AAAA,QAC7D,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,MAAM;AAAA,UACL,QAAQ,CAAC;AAAA,UACT,UAAU,CAAC,CAAC,CAAC;AAAA,QACd;AAAA,QACA,QAAQ,CAAC,QAAQ;AAAA,QACjB,aAAa;AAAA,UACZ,WAAW;AAAA,QACZ;AAAA,MACD,CAAC;AACD,WAAK,uBAAuB;AAC5B,WAAK,0BAA0B;AAAA,IAChC;AAAA,IAEA,yBAAyB;AACxB,WAAK,kBAAkB,eAAe,KAAK,UAAU,KAAK,kBAAkB;AAE5E,aACE,MAAM,2DAA2D;AAAA,QACjE,OAAO,KAAK;AAAA,QACZ,UAAU;AAAA,MACX,CAAC,EACA,KAAK,CAAC,UAAU;AAChB,aAAK,WAAW,OAAO,KAAK;AAAA,MAC7B,CAAC;AAAA,IACH;AAAA,IAEA,wBAAwB,OAAO,OAAO;AACrC,aACE;AAAA,QACA;AAAA,QACA;AAAA,UACC,MAAM,KAAK;AAAA,UACX;AAAA,QACD;AAAA,MACD,EACC,KAAK,CAAC,UAAU;AAChB,YAAI,MAAM,OAAO,QAAQ;AACxB,eAAK,mBAAmB,IAAI,OAAO,MAAM,iCAAiC;AAAA,YACzE,MAAM;AAAA,YACN,MAAM;AAAA,cACL,QAAQ,MAAM;AAAA,cACd,UAAU,MAAM;AAAA,YACjB;AAAA,YACA,iBAAiB;AAAA,YACjB,YAAY;AAAA,cACX,QAAQ;AAAA,cACR,OAAO;AAAA,YACR;AAAA,YACA,QAAQ;AAAA,YACR,WAAW;AAAA,YACX,QAAQ;AAAA,cACP;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,YACD;AAAA,UACD,CAAC;AAAA,QACF,OAAO;AACN,eAAK,QAAQ,KAAK,6BAA6B,EAAE,KAAK;AAAA,QACvD;AAAA,MACD,CAAC;AAAA,IACH;AAAA,IAEA,4BAA4B;AAC3B,UAAI,UAAU;AAAA,QACb;AAAA,UACC,OAAO;AAAA,UACP,SAAS,CAAC,OAAO,QAAQ,aAAa,gBAAgB,QAAQ;AAAA,UAC9D,QAAQ,CAAC,kBAAkB;AAC1B,gBAAI,kBAAkB,OAAO;AAC5B,mBAAK,qBAAqB;AAAA,gBACzB,CAAC,oBAAoB,QAAQ,KAAK,KAAK,SAAS,KAAK;AAAA,gBACrD,CAAC,oBAAoB,QAAQ,MAAM,UAAU,KAAK;AAAA,cACnD;AAAA,YACD,OAAO;AACN,mBAAK,mBAAmB,KAAK;AAAA,gBAC5B;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA;AAAA,cACD;AAAA,YACD;AACA,iBAAK,uBAAuB;AAAA,UAC7B;AAAA,QACD;AAAA,QACA;AAAA,UACC,OAAO;AAAA,UACP,SAAS,CAAC,aAAa,cAAc,gBAAgB,WAAW;AAAA,UAChE,QAAQ,CAAC,kBAAkB;AAC1B,iBAAK,kBAAkB,WAAW;AAClC,iBAAK,uBAAuB;AAAA,UAC7B;AAAA,QACD;AAAA,QACA;AAAA,UACC,OAAO;AAAA,UACP,SAAS,CAAC,SAAS,UAAU,SAAS;AAAA,UACtC,QAAQ,CAAC,kBAAkB;AAC1B,iBAAK,kBAAkB,gBAAgB;AACvC,iBAAK,uBAAuB;AAAA,UAC7B;AAAA,QACD;AAAA,MACD;AACA,aAAO,gBAAgB;AAAA,QACtB;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACD;AAAA,IACD;AAAA,IAEA,kCAAkC;AACjC,UAAI,UAAU;AAAA,QACb;AAAA,UACC,OAAO;AAAA,UACP,SAAS,CAAC,QAAQ,qBAAqB,MAAM;AAAA,UAC7C,YAAY,CAAC,QAAQ,qBAAqB,MAAM;AAAA,UAChD,QAAQ,CAAC,eAAe,cAAc;AACrC,gBAAI,QAAQ,gBAAgB;AAC5B,iBAAK,wBAAwB,WAAW,KAAK;AAAA,UAC9C;AAAA,QACD;AAAA,MACD;AACA,aAAO,gBAAgB;AAAA,QACtB;AAAA,QACA;AAAA,QACA;AAAA,MACD;AAAA,IACD;AAAA,IAEA,+BAA+B;AAC9B,UAAI,UAAU;AAAA,QACb;AAAA,UACC,OAAO,OAAO,gBAAgB,SAAS,OAAO,SAAS,SAAS,CAAC;AAAA,UACjE,SAAS,OAAO,gBAAgB;AAAA,YAC/B,OAAO,KAAK,KAAK;AAAA,UAClB;AAAA,UACA,QAAQ,CAAC,kBAAkB;AAC1B,iBAAK,oBAAoB,OAAO,SAAS,WAAW,aAAa,CAAC;AAAA,UACnE;AAAA,QACD;AAAA,MACD;AACA,aAAO,gBAAgB,qBAAqB,SAAS,gBAAgB,kBAAkB;AAAA,IACxF;AAAA,IAEA,eAAe;AACd,UAAI,sBAAsB,IAAI,OAAO,GAAG,OAAO;AAAA,QAC9C,OAAO,GAAG,cAAc;AAAA,QACxB,QAAQ;AAAA,UACP;AAAA,YACC,WAAW;AAAA,YACX,WAAW;AAAA,YACX,OAAO;AAAA,UACR;AAAA,UACA;AAAA,YACC,WAAW;AAAA,YACX,WAAW;AAAA,YACX,OAAO;AAAA,UACR;AAAA,UACA;AAAA,YACC,WAAW;AAAA,UACZ;AAAA,UACA;AAAA,YACC,WAAW;AAAA,YACX,WAAW;AAAA,YACX,OAAO;AAAA,UACR;AAAA,UACA;AAAA,YACC,WAAW;AAAA,YACX,WAAW;AAAA,UACZ;AAAA,UACA;AAAA,YACC,WAAW;AAAA,YACX,WAAW;AAAA,YACX,OAAO;AAAA,UACR;AAAA,QACD;AAAA,QACA,gBAAgB,CAAC,WAAW;AAC3B,8BAAoB,uBAAuB;AAC3C,iBACE,MAAM,kEAAkE;AAAA,YACxE,cAAc;AAAA,UACf,CAAC,EACA,KAAK,CAAC,SAAS;AACf,iBAAK,QAAQ,KAAK;AAClB,iBAAK,OAAO,OAAO,OAAO,QAAQ,IAAI;AACtC,gCAAoB,KAAK;AACzB,iBAAK,oBAAoB;AAAA,UAC1B,CAAC,EACA,QAAQ,MAAM;AACd,gCAAoB,sBAAsB;AAAA,UAC3C,CAAC;AAAA,QACH;AAAA,QACA,sBAAsB,GAAG,MAAM;AAAA,MAChC,CAAC;AAED,0BAAoB,WAAW;AAAA,QAC9B,YAAY,KAAK,KAAK;AAAA,QACtB,UAAU,KAAK,KAAK;AAAA,QACpB,UAAU,KAAK,KAAK;AAAA,QACpB,KAAK,KAAK,KAAK;AAAA,MAChB,CAAC;AACD,0BAAoB,KAAK;AAAA,IAC1B;AAAA,IAEA,sBAAsB;AACrB,WAAK,QAAQ,MAAM,EAAE;AAAA,QACpB,OAAO,gBAAgB,wBAAwB;AAAA,UAC9C,YAAY,KAAK,KAAK;AAAA,UACtB,WAAW,KAAK,KAAK;AAAA,UACrB,eAAe,KAAK,KAAK;AAAA,UACzB,eAAe,KAAK,KAAK;AAAA,UACzB,UAAU,KAAK,KAAK;AAAA,QACrB,CAAC;AAAA,MACF;AAEA,WAAK,yBAAyB;AAAA,IAC/B;AAAA,IAEA,2BAA2B;AAC1B,UAAI,KAAK,YAAY,OAAO,QAAQ,MAAM;AACzC,aAAK,QAAQ,KAAK,gBAAgB,EAAE,KAAK;AAAA,MAC1C,OAAO;AACN,aAAK,QAAQ,KAAK,oBAAoB,EAAE,GAAG,SAAS,MAAM;AACzD,eAAK,aAAa;AAAA,QACnB,CAAC;AAED,aAAK,QAAQ,KAAK,qBAAqB,EAAE,GAAG,SAAS,MAAM;AAC1D,eAAK,oBAAoB;AAAA,QAC1B,CAAC;AAAA,MACF;AAAA,IACD;AAAA,IAEA,gBAAgB;AACf,aAAO,OACL,MAAM,4DAA4D;AAAA,QAClE,MAAM,KAAK;AAAA,MACZ,CAAC,EACA,KAAK,CAAC,MAAM;AACZ,YAAI,EAAE,aAAa;AAAQ,eAAK,aAAa,EAAE,aAAa;AAC5D,YAAI,EAAE,cAAc;AAAQ,eAAK,OAAO,EAAE,cAAc;AAAA,MACzD,CAAC;AAAA,IACH;AAAA,IAEA,kBAAkB;AACjB,aAAO,OACL;AAAA,QACA;AAAA,QACA;AAAA,UACC,MAAM,KAAK;AAAA,QACZ;AAAA,MACD,EACC,KAAK,CAAC,MAAM;AACZ,YAAI,EAAE,KAAK,UAAU;AACpB,eAAK,gBAAgB,EAAE,KAAK,SAAS;AACrC,eAAK,gBAAgB,EAAE,KAAK,SAAS;AAAA,QACtC;AAAA,MACD,CAAC;AAAA,IACH;AAAA,IAEA,yBAAyB;AACxB,UAAI,mBAAmB,KAAK,QAAQ,KAAK,aAAa;AACtD,UAAI,2BAA2B,KAAK,QAAQ,KAAK,oBAAoB;AAErE,YAAM,gBAAgB,CAAC,OAAO,OAAO,SAAS;AAC7C,eAAO;AAAA,MACJ,OAAO,MAAM,KAAK,MAAM,MAAM,WAAW;AAAA;AAAA,+BAEhB;AAAA,+BACA;AAAA;AAAA;AAAA,MAG7B;AAEA,WAAK,cAAc,EAAE,KAAK,MAAM;AAC/B,aAAK,gBAAgB,EAAE,KAAK,MAAM;AACjC,cAAI,OAAO,EAAE;AAAA,OACV,cAAc,KAAK,eAAe,GAAG,eAAe,GAAG,qBAAqB;AAAA,OAC5E,cAAc,KAAK,eAAe,GAAG,eAAe,GAAG,qBAAqB;AAAA,OAC5E,cAAc,KAAK,MAAM,GAAG,MAAM,GAAG,YAAY;AAAA,OACjD,cAAc,KAAK,YAAY,GAAG,cAAc,GAAG,oBAAoB;AAAA,KACzE;AAED,2BAAiB,OAAO,IAAI;AAC5B,mCAAyB,YAAY,MAAM;AAAA,QAC5C,CAAC;AAAA,MACF,CAAC;AAAA,IACF;AAAA,IAEA,sBAAsB;AACrB,aAAO,UAAU,QAAQ,QAAQ,KAAK,OAAO;AAAA,IAC9C;AAAA,IAEA,+BAA+B;AAC9B,WAAK,yBAAyB,IAAI,oBAAoB;AAAA,QACrD,QAAQ,KAAK,QAAQ,KAAK,uBAAuB;AAAA,QACjD,QAAQ,KAAK,QAAQ,KAAK,yBAAyB;AAAA,QACnD,MAAM,KAAK;AAAA,MACZ,CAAC;AAED,WAAK,uBAAuB,QAAQ;AAAA,IACrC;AAAA,EACD;AAEA,MAAM,sBAAN,cAAkC,sBAAa;AAAA,IAC9C,OAAO;AACN,YAAM,KAAK;AACX,WAAK,iBAAiB;AACtB,WAAK,iBAAiB;AACtB,WAAK,yBAAyB;AAAA,IAC/B;AAAA,IACA,4BAA4B;AAC3B,aAAO,KAAK,uBAAuB,EAAE,KAAK,CAAC,eAAe;AACzD,YAAI,CAAC,WAAW,QAAQ;AACvB,eAAK,iBAAiB,KAAK;AAC3B,eAAK,iBAAiB,KAAK,QAAQ,GAAG,uBAAuB,SAAS;AACtE;AAAA,QACD;AACA,aAAK,iBAAiB,OAAO,WAAW,WAAW,KAAK,cAAc;AACtE,aAAK,iBAAiB,WAAW;AAAA,UAAI,CAAC,aACrC,KAAK,2BAA2B,QAAQ;AAAA,QACzC;AAAA,MACD,CAAC;AAAA,IACF;AAAA,IAEA,yBAAyB;AACxB,aAAO,OAAO,MAAM,qEAAqE;AAAA,QACxF,OAAO,KAAK;AAAA,QACZ,OAAO,KAAK;AAAA,QACZ,MAAM,KAAK;AAAA,MACZ,CAAC;AAAA,IACF;AAAA,IAEA,2BAA2B,MAAM;AAChC,UAAI,OACH,KAAK,QAAQ,iBAAiB,SAAS,KAAK,QAAQ,cAAc,cAAc;AACjF,aAAO;AAAA,QACN;AAAA,QACA,UAAU,KAAK;AAAA,QACf,SAAS;AAAA,QACT,SAAS,OAAO,cAAc,mBAAmB,IAAI;AAAA,MACtD;AAAA,IACD;AAAA,IAEA,2BAA2B;AAC1B,WAAK,mBAAmB;AAAA,QACvB,qCAAqC,GAAG,oBAAoB;AAAA,MAC7D;AACA,WAAK,iBAAiB,KAAK;AAC3B,WAAK,OAAO,OAAO,KAAK,gBAAgB;AACxC,WAAK,iBAAiB,GAAG,SAAS,MAAM,KAAK,mBAAmB,CAAC;AAAA,IAClE;AAAA,IAEA,qBAAqB;AACpB,WAAK,kBAAkB,KAAK;AAC5B,WAAK,uBAAuB,EAAE,KAAK,CAAC,eAAe;AAClD,YAAI,CAAC,WAAW,UAAU,WAAW,SAAS,KAAK,gBAAgB;AAClE,eAAK,iBAAiB,KAAK;AAAA,QAC5B;AACA,YAAI,iBAAiB,WAAW;AAAA,UAAI,CAAC,aACpC,KAAK,2BAA2B,QAAQ;AAAA,QACzC;AACA,uBAAe,IAAI,CAAC,SAAS,KAAK,kBAAkB,MAAM,IAAI,CAAC;AAAA,MAChE,CAAC;AAAA,IACF;AAAA,EACD;AAEA,SAAO,QAAQ,WAAW;AAC1B,SAAO,GAAG,cAAc;",
  "names": []
}
