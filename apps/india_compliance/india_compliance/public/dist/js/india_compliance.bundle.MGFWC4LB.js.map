{
  "version": 3,
  "sources": ["../../../../../apps/india_compliance/india_compliance/public/js/regex_constants.js", "../../../../../apps/india_compliance/india_compliance/public/js/utils.js", "../../../../../apps/india_compliance/india_compliance/public/js/quick_entry.js", "../../../../../apps/india_compliance/india_compliance/public/js/transaction.js", "../../../../../apps/india_compliance/india_compliance/public/js/audit_trail_notification.js", "../../../../../apps/india_compliance/india_compliance/public/js/item_tax_template_notification.js", "../../../../../apps/india_compliance/india_compliance/public/js/quick_info_popover.js"],
  "sourcesContent": ["// Copied from india_compliance/gst_india/constants\n\nconst NORMAL = \"^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}[Z1-9ABD-J]{1}[0-9A-Z]{1}$\";\nconst GOVT_DEPTID = \"^[0-9]{2}[A-Z]{4}[0-9]{5}[A-Z]{1}[0-9]{1}[Z]{1}[0-9]{1}$\";\nconst NRI_ID = \"^[0-9]{4}[A-Z]{3}[0-9]{5}[N][R][0-9A-Z]{1}$\";\nconst OIDAR = \"^[9][9][0-9]{2}[A-Z]{3}[0-9]{5}[O][S][0-9A-Z]{1}$\";\nconst UNBODY = \"^[0-9]{4}[A-Z]{3}[0-9]{5}[UO]{1}[N][A-Z0-9]{1}$\";\nconst TDS = \"^[0-9]{2}[A-Z]{4}[A-Z0-9]{1}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}[D][0-9A-Z]$\";\n\nexport const REGISTERED_REGEX = new RegExp([NORMAL, GOVT_DEPTID].join(\"|\"));\nexport const OVERSEAS_REGEX = new RegExp([NRI_ID, OIDAR].join(\"|\"));\nexport const UNBODY_REGEX = new RegExp(UNBODY);\nexport const TDS_REGEX = new RegExp(TDS);\n\n// TDS is covered in Normal, hence not included separately\nexport const GSTIN_REGEX = new RegExp(\n    [NORMAL, GOVT_DEPTID, NRI_ID, OIDAR, UNBODY].join(\"|\")\n);\n\nexport const GST_INVOICE_NUMBER_FORMAT = new RegExp(\"^[^\\\\W_][A-Za-z\\\\d\\\\-/]{0,15}$\");\n", "import {\n    GSTIN_REGEX,\n    REGISTERED_REGEX,\n    OVERSEAS_REGEX,\n    UNBODY_REGEX,\n    TDS_REGEX,\n    GST_INVOICE_NUMBER_FORMAT,\n} from \"./regex_constants\";\n\nfrappe.provide(\"india_compliance\");\n\nwindow.gst_settings = frappe.boot.gst_settings;\n\nObject.assign(india_compliance, {\n    get_gstin_query(party, party_type = \"Company\") {\n        if (!party) {\n            frappe.show_alert({\n                message: __(\"Please select {0} to get GSTIN options\", [__(party_type)]),\n                indicator: \"yellow\",\n            });\n            return;\n        }\n\n        return {\n            query: \"india_compliance.gst_india.utils.get_gstin_list\",\n            params: { party, party_type },\n        };\n    },\n\n    async get_gstin_options(party, party_type = \"Company\") {\n        const { query, params } = india_compliance.get_gstin_query(party, party_type);\n        const { message } = await frappe.call({\n            method: query,\n            args: params,\n        });\n        return message;\n    },\n\n    async get_account_options(company) {\n        if (!company) return;\n        const { message } = await frappe.call({\n            method: \"india_compliance.gst_india.utils.get_all_gst_accounts\",\n            args: {\n                company,\n            },\n        });\n\n        return message || [];\n    },\n\n    get_party_type(doctype) {\n        return in_list(frappe.boot.sales_doctypes, doctype) ? \"Customer\" : \"Supplier\";\n    },\n\n    async set_gstin_status(field, transaction_date, force_update = 0) {\n        const gstin = field.value;\n        if (!gstin || gstin.length !== 15) return field.set_description(\"\");\n\n        const { message } = await frappe.call({\n            method: \"india_compliance.gst_india.doctype.gstin.gstin.get_gstin_status\",\n            args: {\n                gstin,\n                transaction_date,\n                is_request_from_ui: 1,\n                force_update,\n            },\n        });\n\n        if (!message) return field.set_description(\"\");\n\n        field.set_description(\n            india_compliance.get_gstin_status_desc(\n                message?.status,\n                message?.last_updated_on\n            )\n        );\n\n        this.set_gstin_refresh_btn(field, transaction_date);\n\n        return message;\n    },\n\n    get_gstin_status_desc(status, datetime) {\n        if (!status) return;\n        const user_date = frappe.datetime.str_to_user(datetime);\n        const pretty_date = frappe.datetime.prettyDate(datetime);\n\n        const STATUS_COLORS = { Active: \"green\", Cancelled: \"red\" };\n        return `<div class=\"d-flex indicator ${STATUS_COLORS[status] || \"orange\"}\">\n                    Status:&nbsp;<strong>${status}</strong>\n                    <span class=\"text-right ml-auto gstin-last-updated\">\n                        <span title=\"${user_date}\">\n                            ${datetime ? \"updated \" + pretty_date : \"\"}\n                        </span>\n                    </span>\n                </div>`;\n    },\n\n    set_gstin_refresh_btn(field, transaction_date) {\n        if (\n            !this.is_api_enabled() ||\n            gst_settings.sandbox_mode ||\n            !gst_settings.validate_gstin_status ||\n            field.$wrapper.find(\".refresh-gstin\").length\n        )\n            return;\n\n        const refresh_btn = $(`\n            <svg class=\"icon icon-sm refresh-gstin\" style=\"\">\n                <use class=\"\" href=\"#icon-refresh\" style=\"cursor: pointer\"></use>\n            </svg>\n        `).appendTo(field.$wrapper.find(\".gstin-last-updated\"));\n\n        refresh_btn.on(\"click\", async function () {\n            const force_update = 1;\n            await india_compliance.set_gstin_status(\n                field,\n                transaction_date,\n                force_update\n            );\n        });\n    },\n\n    set_state_options(frm) {\n        const state_field = frm.get_field(\"state\");\n        const country = frm.get_field(\"country\").value;\n        if (country !== \"India\") {\n            state_field.set_data([]);\n            return;\n        }\n\n        state_field.set_data(frappe.boot.india_state_options || []);\n    },\n\n    can_enable_api(settings) {\n        return settings.api_secret || frappe.boot.ic_api_enabled_from_conf;\n    },\n\n    is_api_enabled(settings) {\n        if (!settings) settings = gst_settings;\n        return settings.enable_api && india_compliance.can_enable_api(settings);\n    },\n\n    is_e_invoice_enabled() {\n        return india_compliance.is_api_enabled() && gst_settings.enable_e_invoice;\n    },\n\n    validate_gstin(gstin) {\n        if (!gstin || gstin.length !== 15) return;\n\n        gstin = gstin.trim().toUpperCase();\n\n        if (GSTIN_REGEX.test(gstin) && is_gstin_check_digit_valid(gstin)) {\n            return gstin;\n        }\n    },\n\n    get_gstin_otp(error_type, company_gstin) {\n        let description =\n            \"An OTP has been sent to your registered mobile/email for further authentication. Please provide OTP.\";\n        if (error_type === \"invalid_otp\")\n            description = \"Invalid OTP was provided. Please try again.\";\n\n        return new Promise(resolve => {\n            const prompt = new frappe.ui.Dialog({\n                title: __(\"Enter OTP\"),\n                fields: [\n                    {\n                        fieldtype: \"Data\",\n                        label: __(\"One Time Password\"),\n                        fieldname: \"otp\",\n                        reqd: 1,\n                        description: description,\n                    },\n                ],\n                primary_action_label: __(\"Submit\"),\n                primary_action(values) {\n                    resolve(values.otp);\n                    prompt.hide();\n                },\n                secondary_action_label: __(\"Resend OTP\"),\n                secondary_action() {\n                    frappe.call({\n                        method: \"india_compliance.gst_india.doctype.purchase_reconciliation_tool.purchase_reconciliation_tool.resend_otp\",\n                        args: { company_gstin },\n                        callback: function () {\n                            frappe.show_alert({\n                                message: __(\"OTP has been resent.\"),\n                                indicator: \"green\",\n                            });\n                            prompt.get_secondary_btn().addClass(\"disabled\");\n                        },\n                    });\n                },\n            });\n            prompt.show();\n        });\n    },\n\n    guess_gst_category(gstin, country) {\n        if (!gstin) {\n            if (country && country !== \"India\") return \"Overseas\";\n            return \"Unregistered\";\n        }\n\n        if (TDS_REGEX.test(gstin)) return \"Tax Deductor\";\n        if (REGISTERED_REGEX.test(gstin)) return \"Registered Regular\";\n        if (UNBODY_REGEX.test(gstin)) return \"UIN Holders\";\n        if (OVERSEAS_REGEX.test(gstin)) return \"Overseas\";\n    },\n\n    set_hsn_code_query(field) {\n        if (!field || !gst_settings.validate_hsn_code) return;\n        field.get_query = function () {\n            const wildcard = \"_\".repeat(gst_settings.min_hsn_digits) + \"%\";\n            return {\n                filters: {\n                    name: [\"like\", wildcard],\n                },\n            };\n        };\n    },\n\n    set_reconciliation_status(frm, field) {\n        if (!frm.doc.docstatus === 1 || !frm.doc.reconciliation_status) return;\n\n        const STATUS_COLORS = {\n            Reconciled: \"green\",\n            Unreconciled: \"red\",\n            Ignored: \"grey\",\n            \"Not Applicable\": \"grey\",\n        };\n        const color = STATUS_COLORS[frm.doc.reconciliation_status];\n\n        frm.get_field(field).set_description(\n            `<div class=\"d-flex indicator ${color}\">\n                2A/2B Status:&nbsp;<strong>${frm.doc.reconciliation_status}</strong>\n            </div>`\n        );\n    },\n\n    validate_invoice_number(invoice_number) {\n        if (invoice_number.length > 16) {\n            frappe.throw(\n                __(\"GST Invoice Number cannot exceed 16 characters\"),\n                __(\"Invalid GST Invoice Number\")\n            );\n        }\n\n        if (!GST_INVOICE_NUMBER_FORMAT.test(invoice_number)) {\n            frappe.throw(\n                __(\n                    \"GST Invoice Number should start with an alphanumeric character and can only contain alphanumeric characters, dash (-) and slash (/)\"\n                ),\n                __(\"Invalid GST Invoice Number\")\n            );\n        }\n    },\n\n    trigger_file_download(file_content, file_name) {\n        let type = \"application/json;charset=utf-8\";\n\n        if (!file_name.endsWith(\".json\")) {\n            type = \"application/octet-stream\";\n        }\n        const blob = new Blob([file_content], { type: type });\n\n        // Create a link and set the URL using `createObjectURL`\n        const link = document.createElement(\"a\");\n        link.style.display = \"none\";\n        link.href = URL.createObjectURL(blob);\n        link.download = file_name;\n\n        // It needs to be added to the DOM so it can be clicked\n        document.body.appendChild(link);\n        link.click();\n\n        // To make this work on Firefox we need to wait\n        // a little while before removing it.\n        setTimeout(() => {\n            URL.revokeObjectURL(link.href);\n            link.parentNode.removeChild(link);\n        }, 0);\n    },\n\n    set_last_month_as_default_period(report) {\n        report.filters.forEach(filter => {\n            if (filter.fieldname === \"from_date\") {\n                filter.default = this.last_month_start();\n            }\n            if (filter.fieldname === \"to_date\") {\n                filter.default = this.last_month_end();\n            }\n        });\n    },\n\n    last_month_start() {\n        return frappe.datetime.add_months(frappe.datetime.month_start(), -1);\n    },\n\n    last_month_end() {\n        return frappe.datetime.add_days(frappe.datetime.month_start(), -1);\n    },\n\n    primary_to_danger_btn(parent) {\n        parent.$wrapper\n            .find(\".btn-primary\")\n            .removeClass(\"btn-primary\")\n            .addClass(\"btn-danger\");\n    },\n\n    add_divider_to_btn_group(btn_group_name) {\n        $(document)\n            .find(`.inner-group-button[data-label=${btn_group_name}]`)\n            .find(`.dropdown-menu`)\n            .append($('<li class=\"dropdown-divider\"></li>'));\n    },\n\n    make_text_red(btn_group_name, btn_name) {\n        $(document)\n            .find(`.inner-group-button[data-label=${btn_group_name}]`)\n            .find(`.dropdown-item[data-label=\"${encodeURIComponent(btn_name)}\"]`)\n            .addClass(\"text-danger\");\n    },\n});\n\nfunction is_gstin_check_digit_valid(gstin) {\n    /*\n    adapted from\n    https://gitlab.com/srikanthlogic/gstin-validator/-/blob/master/src/index.js\n    */\n\n    const GSTIN_CODEPOINT_CHARS = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    const mod = GSTIN_CODEPOINT_CHARS.length;\n\n    let factor = 2;\n    let sum = 0;\n\n    for (let i = gstin.length - 2; i >= 0; i--) {\n        let codePoint = -1;\n        for (let j = 0; j < GSTIN_CODEPOINT_CHARS.length; j++) {\n            if (GSTIN_CODEPOINT_CHARS[j] === gstin[i]) {\n                codePoint = j;\n            }\n        }\n        let digit = factor * codePoint;\n        factor = factor === 2 ? 1 : 2;\n        digit = Math.floor(digit / mod) + (digit % mod);\n        sum += digit;\n    }\n\n    const checkCodePoint = (mod - (sum % mod)) % mod;\n    return GSTIN_CODEPOINT_CHARS[checkCodePoint] === gstin[14];\n}\n\n// Will be deprecated after v15 release, kept only for compatibility\n// DO NOT USE IN CODE\nwindow.ic = window.india_compliance;\n", "class GSTQuickEntryForm extends frappe.ui.form.QuickEntryForm {\n    constructor(...args) {\n        super(...args);\n        this.skip_redirect_on_error = true;\n        this.api_enabled =\n            india_compliance.is_api_enabled() && gst_settings.autofill_party_info;\n    }\n\n    async setup() {\n        await frappe.model.with_doctype(\"Address\");\n        super.setup();\n    }\n\n    render_dialog() {\n        super.render_dialog();\n        india_compliance.set_state_options(this.dialog);\n    }\n\n    get_address_fields() {\n        return [\n            {\n                label: __(\"Primary Address Details\"),\n                fieldname: \"primary_address_section\",\n                fieldtype: \"Section Break\",\n                description: this.api_enabled\n                    ? __(\n                          `When you enter a GSTIN, the permanent address linked to it is\n                        autofilled.<br>\n                        Change the {0} to autofill other addresses.`,\n                          [frappe.meta.get_label(\"Address\", \"pincode\")]\n                      )\n                    : \"\",\n                collapsible: 0,\n            },\n            {\n                // set as _pincode so that frappe.ui.form.Layout doesn't override it\n                fieldname: \"_pincode\",\n                fieldtype: \"Autocomplete\",\n                ignore_validation: true,\n            },\n            {\n                fieldname: \"address_line1\",\n                fieldtype: \"Data\",\n            },\n            {\n                fieldname: \"address_line2\",\n                fieldtype: \"Data\",\n            },\n            {\n                fieldtype: \"Column Break\",\n            },\n            {\n                fieldname: \"city\",\n                fieldtype: \"Data\",\n            },\n            {\n                fieldname: \"state\",\n                fieldtype: \"Autocomplete\",\n                ignore_validation: true,\n            },\n            {\n                fieldname: \"country\",\n                fieldtype: \"Link\",\n                options: \"Country\",\n                default: frappe.defaults.get_user_default(\"country\"),\n                onchange: () => {\n                    india_compliance.set_state_options(this.dialog);\n                },\n            },\n        ];\n    }\n\n    get_gstin_field() {\n        return [\n            {\n                ...frappe.meta.get_docfield(this.doctype, \"gstin\"),\n                fieldname: \"_gstin\",\n                fieldtype: \"Autocomplete\",\n                description: this.api_enabled ? get_gstin_description() : \"\",\n                ignore_validation: true,\n                onchange: () => {\n                    const d = this.dialog;\n                    if (this.api_enabled && !gst_settings.sandbox_mode)\n                        return autofill_fields(d);\n\n                    d.set_value(\n                        \"gst_category\",\n                        india_compliance.guess_gst_category(d.doc._gstin, d.doc.country)\n                    );\n                },\n            },\n        ];\n    }\n\n    update_doc() {\n        const doc = super.update_doc();\n        doc.pincode = doc._pincode;\n        doc.gstin = doc._gstin;\n        return doc;\n    }\n}\n\nclass PartyQuickEntryForm extends GSTQuickEntryForm {\n    get_address_fields() {\n        const fields = super.get_address_fields();\n\n        for (const field of fields) {\n            const fieldname =\n                field.fieldname === \"_pincode\" ? \"pincode\" : field.fieldname;\n\n            if (!field.label && fieldname) {\n                field.label = frappe.meta.get_label(\"Address\", fieldname);\n            }\n        }\n\n        return fields;\n    }\n\n    render_dialog() {\n        this.mandatory = [\n            ...this.get_gstin_field(),\n            ...this.mandatory,\n            ...this.get_contact_fields(),\n            ...this.get_address_fields(),\n        ];\n\n        if (this.doctype === \"Customer\") {\n            this.mandatory.push({\n                label: __(\"Customer POS ID\"),\n                fieldname: \"customer_pos_id\",\n                fieldtype: \"Data\",\n                hidden: 1,\n            });\n        }\n\n        super.render_dialog();\n    }\n\n    get_contact_fields() {\n        return [\n            {\n                label: __(\"Primary Contact Details\"),\n                fieldname: \"primary_contact_section\",\n                fieldtype: \"Section Break\",\n                collapsible: 0,\n            },\n            {\n                label: __(\"Email ID\"),\n                fieldname: \"_email_id\",\n                fieldtype: \"Data\",\n                options: \"Email\",\n            },\n            {\n                fieldtype: \"Column Break\",\n            },\n            {\n                label: __(\"Mobile Number\"),\n                fieldname: \"_mobile_no\",\n                fieldtype: \"Data\",\n            },\n        ];\n    }\n\n    update_doc() {\n        const doc = super.update_doc();\n        // to prevent clash with ERPNext\n        doc._address_line1 = doc.address_line1;\n        delete doc.address_line1;\n\n        // these fields were suffixed with _ to prevent them from being read only\n        doc.email_id = doc._email_id;\n        doc.mobile_no = doc._mobile_no;\n\n        return doc;\n    }\n}\n\nfrappe.ui.form.CustomerQuickEntryForm = PartyQuickEntryForm;\nfrappe.ui.form.SupplierQuickEntryForm = PartyQuickEntryForm;\n\nclass AddressQuickEntryForm extends GSTQuickEntryForm {\n    get_address_fields() {\n        const fields = super.get_address_fields();\n        const pincode_field = fields.find(field => field.fieldname === \"_pincode\");\n\n        for (const [key, value] of Object.entries(\n            frappe.meta.get_docfield(\"Address\", \"pincode\")\n        )) {\n            if (pincode_field[key] === undefined) pincode_field[key] = value;\n        }\n\n        return fields;\n    }\n\n    async render_dialog() {\n        const address_fields = this.get_address_fields();\n        const fields_to_exclude = address_fields.map(({ fieldname }) => fieldname);\n        fields_to_exclude.push(\"pincode\", \"address_line1\");\n\n        this.mandatory = [\n            ...this.get_dynamic_link_fields(),\n            ...this.get_gstin_field(),\n            ...this.mandatory.filter(\n                field => !fields_to_exclude.includes(field.fieldname)\n            ),\n            ...address_fields,\n        ];\n        super.render_dialog();\n        this.set_default_values();\n    }\n\n    get_dynamic_link_fields() {\n        return [\n            {\n                fieldname: \"link_doctype\",\n                fieldtype: \"Link\",\n                label: \"Link Document Type\",\n                options: \"DocType\",\n                get_query: () => {\n                    return {\n                        query: \"frappe.contacts.address_and_contact.filter_dynamic_link_doctypes\",\n                        filters: {\n                            fieldtype: \"HTML\",\n                            fieldname: \"address_html\",\n                        },\n                    };\n                },\n                onchange: async () => {\n                    const { value, last_value } = this.dialog.get_field(\"link_doctype\");\n\n                    if (value !== last_value) {\n                        // await to avoid clash with onchange of link_name field\n                        await this.dialog.set_value(\"link_name\", \"\");\n                    }\n                },\n            },\n            {\n                fieldtype: \"Column Break\",\n            },\n            {\n                fieldname: \"link_name\",\n                fieldtype: \"Dynamic Link\",\n                label: \"Link Name\",\n                get_options: df => df.doc.link_doctype,\n                onchange: async () => {\n                    const { link_doctype, link_name } = this.dialog.doc;\n\n                    if (\n                        !link_name ||\n                        !in_list(frappe.boot.gst_party_types, link_doctype)\n                    )\n                        return;\n\n                    const { message: gstin_list } = await frappe.call(\n                        \"india_compliance.gst_india.utils.get_gstin_list\",\n                        { party_type: link_doctype, party: link_name }\n                    );\n                    if (!gstin_list || !gstin_list.length) return;\n\n                    this.dialog.fields_dict._gstin.set_data(gstin_list.join(\"\\n\"));\n                },\n            },\n            {\n                fieldtype: \"Section Break\",\n            },\n        ];\n    }\n\n    update_doc() {\n        const doc = super.update_doc();\n        if (doc.link_doctype && doc.link_name) {\n            const link = frappe.model.add_child(doc, \"Dynamic Link\", \"links\");\n            link.link_doctype = doc.link_doctype;\n            link.link_name = doc.link_name;\n        }\n        return doc;\n    }\n\n    async set_default_values() {\n        const default_party = this.guess_default_party();\n        if (default_party && default_party.party) {\n            await this.dialog.set_value(\"link_doctype\", default_party.party_type);\n            this.dialog.set_value(\"link_name\", default_party.party);\n        }\n    }\n\n    guess_default_party() {\n        const doc = cur_frm && cur_frm.doc;\n        if (!doc) return;\n        if (\n            ![\n                ...frappe.boot.sales_doctypes,\n                ...frappe.boot.purchase_doctypes,\n                \"Customer\",\n                \"Supplier\",\n                \"Company\",\n            ].includes(doc.doctype)\n        )\n            return;\n\n        let party_type = doc.doctype;\n        let party = doc.name;\n\n        if (frappe.dynamic_link && frappe.dynamic_link.doc === doc) {\n            party_type = frappe.dynamic_link.doctype;\n            party = frappe.dynamic_link.doc[frappe.dynamic_link.fieldname];\n        }\n\n        return {\n            party_type: party_type,\n            party: party,\n        };\n    }\n}\n\nfrappe.ui.form.AddressQuickEntryForm = AddressQuickEntryForm;\n\nclass ItemQuickEntryForm extends frappe.ui.form.QuickEntryForm {\n    render_dialog() {\n        super.render_dialog();\n        india_compliance.set_hsn_code_query(this.dialog.get_field(\"gst_hsn_code\"));\n    }\n}\n\nfrappe.ui.form.ItemQuickEntryForm = ItemQuickEntryForm;\n\nasync function autofill_fields(dialog) {\n    const gstin = dialog.doc._gstin;\n    const gstin_field = dialog.get_field(\"_gstin\");\n\n    if (!gstin || gstin.length !== 15) {\n        const pincode_field = dialog.fields_dict._pincode;\n        pincode_field.set_data([]);\n        pincode_field.df.onchange = null;\n\n        gstin_field.set_description(get_gstin_description());\n        return;\n    }\n\n    const gstin_info = await get_gstin_info(gstin);\n    set_gstin_description(gstin_field, gstin_info.status);\n    map_gstin_info(dialog.doc, gstin_info);\n    dialog.refresh();\n\n    setup_pincode_field(dialog, gstin_info);\n}\n\nfunction set_gstin_description(gstin_field, status) {\n    if (!status) {\n        gstin_field.set_description(\"\");\n        return;\n    }\n\n    gstin_field.set_description(india_compliance.get_gstin_status_desc(status));\n}\n\nfunction setup_pincode_field(dialog, gstin_info) {\n    if (!gstin_info.all_addresses) return;\n\n    const pincode_field = dialog.fields_dict._pincode;\n    pincode_field.set_data(\n        gstin_info.all_addresses.map(address => {\n            return {\n                label: address.pincode,\n                value: address.pincode,\n                description: `${address.address_line1}, ${address.address_line2}, ${address.city}, ${address.state}`,\n            };\n        })\n    );\n\n    pincode_field.df.onchange = () => {\n        autofill_address(dialog.doc, gstin_info);\n        dialog.refresh();\n    };\n}\n\nfunction get_gstin_info(gstin, throw_error = true) {\n    return frappe\n        .call({\n            method: \"india_compliance.gst_india.utils.gstin_info.get_gstin_info\",\n            args: { gstin, throw_error },\n        })\n        .then(r => r.message);\n}\n\nfunction map_gstin_info(doc, gstin_info) {\n    if (!gstin_info) return;\n\n    update_party_info(doc, gstin_info);\n\n    if (gstin_info.permanent_address) {\n        update_address_info(doc, gstin_info.permanent_address);\n    }\n}\n\nfunction update_party_info(doc, gstin_info) {\n    doc.gstin = doc._gstin;\n    doc.gst_category = gstin_info.gst_category;\n\n    if (!in_list(frappe.boot.gst_party_types, doc.doctype)) return;\n\n    const party_name_field = `${doc.doctype.toLowerCase()}_name`;\n    doc[party_name_field] = gstin_info.business_name;\n}\n\nfunction update_address_info(doc, address) {\n    if (!address) return;\n\n    Object.assign(doc, address);\n    // set field renamed due conflict with frappe.ui.form.Layout\n    doc._pincode = address.pincode;\n}\n\nfunction autofill_address(doc, { all_addresses }) {\n    const { _pincode: pincode } = doc;\n    if (!pincode || pincode.length !== 6 || !all_addresses) return;\n\n    update_address_info(\n        doc,\n        all_addresses.find(address => address.pincode == pincode)\n    );\n}\n\nfunction get_gstin_description() {\n    if (!gst_settings.sandbox_mode) {\n        return __(\"Autofill party information by entering their GSTIN\");\n    }\n\n    return __(\"Autofill is not supported in sandbox mode\");\n}\n", "// functions in this file will apply to most transactions\n// POS Invoice is a notable exception since it doesn't get created from the UI\nfrappe.provide(\"india_compliance\");\n\nconst TRANSACTION_DOCTYPES = [\n    \"Quotation\",\n    \"Sales Order\",\n    \"Delivery Note\",\n    \"Sales Invoice\",\n    \"Purchase Order\",\n    \"Purchase Receipt\",\n    \"Purchase Invoice\",\n];\n\nfor (const doctype of TRANSACTION_DOCTYPES) {\n    fetch_gst_details(doctype);\n    validate_overseas_gst_category(doctype);\n    set_and_validate_gstin_status(doctype);\n}\n\nfor (const doctype of [\"Sales Invoice\", \"Delivery Note\"]) {\n    ignore_port_code_validation(doctype);\n}\n\nfunction fetch_gst_details(doctype) {\n    const event_fields = [\n        \"tax_category\",\n        \"company_gstin\",\n        \"place_of_supply\",\n        \"is_reverse_charge\",\n    ];\n\n    // we are using address below to prevent multiple event triggers\n    if (in_list(frappe.boot.sales_doctypes, doctype)) {\n        event_fields.push(\"customer_address\", \"is_export_with_gst\");\n    } else {\n        event_fields.push(\"supplier_address\");\n    }\n\n    const events = Object.fromEntries(\n        event_fields.map(field => [field, frm => update_gst_details(frm, field)])\n    );\n\n    frappe.ui.form.on(doctype, events);\n}\n\nasync function update_gst_details(frm, event) {\n    if (\n        frm.updating_party_details ||\n        !frm.doc.company ||\n        (event === \"place_of_supply\" && frm.__updating_gst_details)\n    )\n        return;\n\n    const party_type = india_compliance.get_party_type(frm.doc.doctype).toLowerCase();\n    const party_fieldname = frm.doc.doctype === \"Quotation\" ? \"party_name\" : party_type;\n    const party = frm.doc[party_fieldname];\n    if (!party) return;\n\n    if (in_list([\"company_gstin\", \"customer_address\", \"supplier_address\"], event)) {\n        frm.__update_place_of_supply = true;\n    }\n\n    if (frm.__gst_update_triggered) return;\n    frm.__gst_update_triggered = true;\n\n    const args = {\n        doctype: frm.doc.doctype,\n        company: frm.doc.company,\n    };\n\n    // wait for GSTINs to get fetched\n    await frappe.after_ajax();\n\n    // reset flags\n    frm.__gst_update_triggered = false;\n\n    if (frm.__update_place_of_supply) {\n        args.update_place_of_supply = 1;\n        frm.__update_place_of_supply = false;\n    }\n\n    const party_details = {};\n\n    // set \"customer\" or \"supplier\" (not applicable for Quotations with Lead)\n    if (frm.doc.doctype !== \"Quotation\" || frm.doc.party_type === \"Customer\") {\n        party_details[party_type] = party;\n    }\n\n    const fieldnames_to_set = [\n        \"tax_category\",\n        \"gst_category\",\n        \"company_gstin\",\n        \"place_of_supply\",\n        \"is_reverse_charge\",\n    ];\n\n    if (in_list(frappe.boot.sales_doctypes, frm.doc.doctype)) {\n        fieldnames_to_set.push(\n            \"customer_address\",\n            \"billing_address_gstin\",\n            \"is_export_with_gst\"\n        );\n    } else {\n        fieldnames_to_set.push(\"supplier_address\", \"supplier_gstin\");\n    }\n\n    for (const fieldname of fieldnames_to_set) {\n        party_details[fieldname] = frm.doc[fieldname];\n    }\n\n    args.party_details = JSON.stringify(party_details);\n\n    india_compliance.fetch_and_update_gst_details(frm, args);\n}\n\nindia_compliance.fetch_and_update_gst_details = function (frm, args, method) {\n    frappe.call({\n        method: method || \"india_compliance.gst_india.overrides.transaction.get_gst_details\",\n        args,\n        async callback(r) {\n            if (!r.message) return;\n\n            frm.__updating_gst_details = true;\n            await frm.set_value(r.message);\n            frm.__updating_gst_details = false;\n        },\n    });\n}\n\nfunction validate_overseas_gst_category(doctype) {\n    frappe.ui.form.on(doctype, {\n        gst_category(frm) {\n            const { enable_overseas_transactions } = gst_settings;\n            if (!is_overseas_transaction(frm) || enable_overseas_transactions) return;\n\n            frappe.throw(\n                __(\"Please enable SEZ / Overseas transactions in GST Settings first\")\n            );\n        },\n    });\n}\n\nfunction is_overseas_transaction(frm) {\n    if (frm.doc.gst_category === \"SEZ\") return true;\n\n    if (frappe.boot.sales_doctypes) return is_foreign_transaction(frm);\n\n    return frm.doc.gst_category === \"Overseas\";\n}\n\nfunction ignore_port_code_validation(doctype) {\n    frappe.ui.form.on(doctype, {\n        onload(frm) {\n            frm.set_df_property(\"port_code\", \"ignore_validation\", 1);\n        },\n    });\n}\n\nfunction is_foreign_transaction(frm) {\n    return (\n        frm.doc.gst_category === \"Overseas\" &&\n        frm.doc.place_of_supply === \"96-Other Countries\"\n    );\n}\n\nfunction set_and_validate_gstin_status(doctype) {\n    const gstin_field_name = frappe.boot.sales_doctypes.includes(doctype)\n        ? \"billing_address_gstin\"\n        : \"supplier_gstin\";\n\n    frappe.ui.form.on(doctype, {\n        refresh(frm) {\n            if (frm.doc[gstin_field_name])\n                _set_gstin_status(frm, gstin_field_name);\n        },\n\n        [gstin_field_name](frm) {\n            _set_and_validate_gstin_status(frm, gstin_field_name);\n        },\n\n        posting_date(frm) {\n            if (frm.get_field(\"posting_date\"))\n                _set_and_validate_gstin_status(frm, gstin_field_name);\n        },\n\n        transaction_date(frm) {\n            if (frm.get_field(\"transaction_date\"))\n                _set_and_validate_gstin_status(frm, gstin_field_name);\n        },\n    });\n}\n\nasync function _set_and_validate_gstin_status(frm, gstin_field_name) {\n    const gstin_doc = await _set_gstin_status(frm, gstin_field_name);\n    if (!gstin_doc) return;\n\n    validate_gstin_status(gstin_doc, frm, gstin_field_name);\n}\n\nasync function _set_gstin_status(frm, gstin_field_name) {\n    const gstin_field = frm.get_field(gstin_field_name);\n    const gstin = gstin_field.value;\n    const date_field =\n        frm.get_field(\"posting_date\") || frm.get_field(\"transaction_date\");\n\n\n    let gstin_doc = frm._gstin_doc?.[gstin];\n    if (!gstin_doc) {\n        gstin_doc = await india_compliance.set_gstin_status(gstin_field, date_field.value);\n\n        frm._gstin_doc = frm._gstin_doc || {};\n        frm._gstin_doc[gstin] = gstin_doc;\n    } else {\n        gstin_field.set_description(\n            india_compliance.get_gstin_status_desc(gstin_doc?.status, gstin_doc?.last_updated_on)\n        );\n    }\n\n    return gstin_doc;\n}\n\nfunction validate_gstin_status(gstin_doc, frm, gstin_field_name) {\n    if (!gst_settings.validate_gstin_status) return;\n\n    const date_field =\n        frm.get_field(\"posting_date\") || frm.get_field(\"transaction_date\");\n\n    const gstin_field = frm.get_field(gstin_field_name);\n    const transaction_date = frappe.datetime.str_to_obj(date_field.value);\n    const registration_date = frappe.datetime.str_to_obj(gstin_doc.registration_date);\n    const cancelled_date = frappe.datetime.str_to_obj(gstin_doc.cancelled_date);\n\n    if (!registration_date || transaction_date < registration_date)\n        frappe.throw({\n            message: __(\n                \"{0} is Registered on {1}. Please make sure that the {2} is on or after {1}\",\n                [\n                    gstin_field.df.label,\n                    frappe.datetime.str_to_user(gstin_doc.registration_date),\n                    date_field.df.label,\n                ]\n            ),\n            title: __(\"Invalid Party GSTIN\"),\n        });\n\n    if (gstin_doc.status === \"Cancelled\" && transaction_date >= cancelled_date)\n        frappe.throw({\n            message: __(\n                \"{0} is Cancelled from {1}. Please make sure that the {2} is before {1}\",\n                [\n                    gstin_field.df.label,\n                    frappe.datetime.str_to_user(gstin_doc.cancelled_date),\n                    date_field.df.label,\n                ]\n            ),\n            title: __(\"Invalid Party GSTIN\"),\n        });\n\n    if (![\"Active\", \"Cancelled\"].includes(gstin_doc.status))\n        frappe.throw({\n            message: __(\"Status of {0} is {1}\", [\n                gstin_field.df.label,\n                gstin_doc.status,\n            ]),\n            title: __(\"Invalid GSTIN Status\"),\n        });\n}\n\nfunction show_gst_invoice_no_banner(frm) {\n    frm.dashboard.clear_headline();\n    if (\n        !is_invoice_no_validation_required(\n            frm.doc.transaction_type || frm.doc.document_type\n        )\n    )\n        return;\n\n    frm.dashboard.set_headline_alert(\n        `Naming Series should <strong>not</strong> exceed 16 characters for GST. <a href=\"https://docs.indiacompliance.app/docs/miscellaneous/transaction_validations#document-name\" target=\"_blank\">Know more</a>`,\n        \"blue\"\n    );\n}\n\nfunction is_invoice_no_validation_required(transaction_type) {\n    return (\n        transaction_type === \"Sales Invoice\" ||\n        (transaction_type === \"Purchase Invoice\" &&\n            gst_settings.enable_e_waybill_from_pi) ||\n        (transaction_type === \"Delivery Note\" &&\n            gst_settings.enable_e_waybill_from_dn) ||\n        (transaction_type === \"Purchase Receipt\" &&\n            gst_settings.enable_e_waybill_from_pr)\n    );\n}\n", "$(document).on(\"app_ready\", async function() {\n    if (!frappe.boot.needs_audit_trail_notification) return;\n\n    // let other processes finish\n    await new Promise(resolve => setTimeout(resolve, 700));\n    const d = frappe.msgprint({\n        title: __(\"Configure Audit Trail\"),\n        indicator: \"orange\",\n        message: __(\n            `Dear India Compliance User,\n            <br><br>\n\n            In accordance with\n            <a\n              href='https://www.mca.gov.in/Ministry/pdf/AccountsAmendmentRules_24032021.pdf'\n              target='_blank'\n            >MCA Notification dated 24-03-2021</a>,\n            all companies registered in India are required to maintain an Audit Trail\n            of each and every transaction and creating an edit log of each change made\n            in books of account w.e.f 1st April 2023.\n            <br><br>\n            To comply with this requirement, we have introduced a new setting called\n            <strong>Enable Audit Trail</strong> in Accounts Settings.\n            <br><br>\n            <strong>Note:</strong>\n            <ul>\n                <li>Once this setting is enabled, it cannot be disabled.</li>\n                <li>\n                Enabling this setting will cause the following accounts setting\n                to get disabled to ensure Audit Trail integrity:<br>\n                <strong>\n                Delete Accounting and Stock Ledger Entries on deletion of Transaction\n                </strong>\n                </li>\n            </ul>\n\n\n            Would you like to enable the same?`\n        ),\n    });\n\n    d.set_primary_action(__(\"Enable Audit Trail\"), () => {\n        frappe.call({\n            method: \"india_compliance.audit_trail.utils.enable_audit_trail\",\n            callback(r) {\n                if (r.exc) return;\n\n                frappe.show_alert({\n                    message: __(\"Audit Trail Enabled\"),\n                    indicator: \"green\",\n                });\n            },\n        });\n\n        d.hide();\n    });\n\n    d.set_secondary_action_label(__(\"Review Accounts Settings\"));\n    d.set_secondary_action(() => {\n        frappe.set_route(\"Form\", \"Accounts Settings\");\n        d.hide();\n    });\n\n    d.onhide = () => {\n        frappe.xcall(\"india_compliance.audit_trail.utils.disable_audit_trail_notification\");\n    };\n});\n", "// TODO: Update documentation links\n$(document).on(\"app_ready\", async function () {\n    if (!frappe.boot.needs_item_tax_template_notification) return;\n\n    // let other processes finish\n    await new Promise(resolve => setTimeout(resolve, 700));\n    const d = frappe.msgprint({\n        title: __(\"\uD83D\uDEA8 Important: Changes to Item Tax Template\"),\n        indicator: \"orange\",\n        message: __(\n            `Dear India Compliance User,\n            <br><br>\n\n            We are pleased to inform you about a recent update on how Item Tax Templates are\n            maintained in India Compliance App.\n            <br><br>\n\n            Migration Guide:\n            <a\n                href='https://docs.indiacompliance.app/docs/developer-guide/migration-guide#item-tax-templates'\n                target='_blank'\n            >Migrating Item Tax Template</a>\n            <br><br>\n\n            <strong>Breaking Change:</strong>\n            <ul>\n                <li>GST Category for Nil-Rated, Exempted and Non-GST is introduced in Item Tax Template</li>\n                <li>Nil-Rated items are differentiated from Exempted for GST (configrable from Item Tax Template)</li>\n                <li><strong>Assumption Made:</strong> All transactions that were marked as Nil or Exempt,\n                are now marked as Nil-Rated.</li>\n            </ul>\n\n            <strong>Note:</strong>\n            If the above assumptions are not valid for your organization, please update item tax templates\n            accordingly for your items.\n            `\n        ),\n    });\n\n    d.onhide = () => {\n        frappe.xcall(\n            \"india_compliance.gst_india.utils.disable_item_tax_template_notification\"\n        );\n    };\n});\n", "frappe.provide(\"india_compliance\");\n\nindia_compliance.quick_info_popover = class QuickInfoPopover {\n\tconstructor(frm, field_dict) {\n        /**\n\t * Setup tooltip for fields to show details\n\t * @param {Object} frm          Form object\n\t * @param {Object} field_dict   Dictionary of fields with info to show\n\t */\n\n\t\tthis.frm = frm;\n\t\tthis.field_dict = field_dict;\n\t\tthis.make();\n\t}\n\tmake() {\n\t\tthis.create_info_popover();\n\t}\n\tcreate_info_popover() {\n\t\tif (!this.field_dict) return;\n\n\t\tfor (const [field, info] of Object.entries(this.field_dict)) {\n\t\t\tthis.create_info_icon(field);\n\n\t\t\tif (!this.info_btn) return;\n\n\t\t\tthis.info_btn.popover({\n\t\t\t\ttrigger: \"hover\",\n\t\t\t\tplacement: \"top\",\n\t\t\t\tcontent: () => this.get_content_html(field, info),\n\t\t\t\thtml: true,\n\t\t\t});\n\t\t}\n\t}\n\tcreate_info_icon(field) {\n\t\tlet field_area = this.frm.get_field(field).$wrapper.find(\".clearfix\");\n\t\tthis.info_btn = $(`<i class=\"fa fa-info-circle\"></i>`).appendTo(field_area);\n\t}\n\tget_content_html(field, info) {\n\t\tlet field_lable = frappe.meta.get_label(this.frm.doctype, field);\n\n\t\treturn `\n\t\t\t<div class=\"quick-info-popover\">\n\t\t\t\t<div class=\"preview-field\">\n\t\t\t\t\t<div class=\"preview-label text-muted\">${__(field_lable)}</div>\n\t\t\t\t\t<hr>\n\t\t\t\t\t<div class=\"preview-value\">${info}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t}\n};\n"],
  "mappings": "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",
  "names": []
}
