var y=(d,r,l)=>new Promise((i,s)=>{var v=t=>{try{f(l.next(t))}catch(a){s(a)}},_=t=>{try{f(l.throw(t))}catch(a){s(a)}},f=t=>t.done?i(t.value):Promise.resolve(t.value).then(v,_);f((l=l.apply(d,r)).next())});import{_ as C,j as k,K as F,o as u,n as m,b as c,w as n,u as o,a7 as A,a8 as T,d as b,t as O,a9 as $,aa as z,z as B,O as L,a as M,Q as P,F as x,h as j,l as W,r as U,s as q,c as S,p as I,q as D,ab as N,x as R,ac as V}from"./index-a4ebe9d4.js";const E={class:"bg-white h-full w-full overflow-auto touch-pinch-zoom"},H=["src"],K=["src"],Q={__name:"FilePreviewModal",props:{file:{type:Object,required:!0}},setup(d){const r=d,l=k(()=>r.file.file_name||r.file.name),i=k(()=>r.file.file_url?r.file.file_url:URL.createObjectURL(r.file)),s=k(()=>/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(l.value));return F(()=>{URL.revokeObjectURL(i.value)}),(v,_)=>(u(),m(x,null,[c(o(L),null,{default:n(()=>[c(o(A),null,{default:n(()=>[c(o(T),null,{default:n(()=>[b(O(l.value)+" - File Preview",1)]),_:1}),c(o($),{slot:"end"},{default:n(()=>[c(o(z),{onClick:_[0]||(_[0]=f=>o(B).dismiss())},{default:n(()=>[b("Close")]),_:1})]),_:1})]),_:1})]),_:1}),c(o(P),null,{default:n(()=>[M("div",E,[s.value?(u(),m("img",{key:0,src:i.value,class:"h-auto image-preview"},null,8,H)):(u(),m("iframe",{key:1,src:i.value,class:"w-full h-full"},null,8,K))])]),_:1})],64))}},G=C(Q,[["__scopeId","data-v-42339bea"]]),ee=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));const J={__name:"WorkflowActionSheet",props:{doc:{type:Object,required:!0},workflow:{type:Object,required:!1},view:{type:String,default:"form",validator:d=>["form","actionSheet"].includes(d)}},emits:["workflow-applied"],setup(d,{emit:r}){const l=d;let i=j(!1),s=j([]);const v=()=>y(this,null,function*(){const t=yield l.workflow.getTransitions(l.doc);s.value=t.map(a=>{let w="",e="gray",p="subtle",h="",g=a.toLowerCase();return g.includes("reject")||g.includes("cancel")?(w="destructive",e="red",p="subtle",h="x"):g.includes("approve")&&(e="green",p="solid",h="check"),{text:a,role:w,theme:e,variant:p,featherIcon:h,data:{action:a}}})}),_=()=>{var t;((t=s.value)==null?void 0:t.length)>0&&s.value.push({text:"Dismiss",role:"cancel"}),i.value=!0},f=w=>y(this,[w],function*({event:t="",workflowAction:a=""}){var p;const e=a||((p=t.detail.data)==null?void 0:p.action);e&&(yield l.workflow.applyWorkflow(l.doc,e),B.dismiss(),r("workflow-applied")),i.value=!1});return W(()=>v()),(t,a)=>{const w=U("Button");return u(),m(x,null,[o(s).length>0?(u(),m("div",{key:0,class:q([l.view==="form"?"px-4 pt-4 mt-2 sm:w-96 bg-white sticky bottom-0 w-full drop-shadow-xl z-40 border-t rounded-t-lg pb-10":"flex w-full flex-row items-center justify-between gap-3 sticky bottom-0 border-t z-[100] p-4"])},[l.view==="form"||o(s).length>2?(u(),S(w,{key:0,onClick:a[0]||(a[0]=e=>_()),class:"w-full rounded mt-2 py-5 text-base disabled:bg-gray-700 disabled:text-white",variant:"solid"},{prefix:n(()=>[c(o(I),{name:"chevron-up",class:"w-4"})]),default:n(()=>[b(" Actions ")]),_:1})):(u(!0),m(x,{key:1},D(o(s),e=>(u(),S(w,{class:"w-full py-5",variant:e.variant,theme:e.theme,onClick:p=>f({workflowAction:e.text})},N({default:n(()=>[b(" "+O(e.text),1)]),_:2},[e.featherIcon?{name:"prefix",fn:n(()=>[c(o(I),{name:e.featherIcon,class:"w-4"},null,8,["name"])]),key:"0"}:void 0]),1032,["variant","theme","onClick"]))),256))],2)):R("",!0),c(o(V),{buttons:o(s),"is-open":o(i),onDidDismiss:a[1]||(a[1]=e=>f({event:e}))},null,8,["buttons","is-open"])],64)}}},X=C(J,[["__scopeId","data-v-8324c757"]]),te=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{G as F,X as W,ee as a,te as b};
